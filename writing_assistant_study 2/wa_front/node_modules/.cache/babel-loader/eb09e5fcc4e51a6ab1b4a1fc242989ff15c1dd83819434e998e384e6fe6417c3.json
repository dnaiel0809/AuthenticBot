{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\n\nimport http from \"@/http\";\nimport VueMarkdown from \"vue-markdown\";\nimport EasyMDE from \"easymde\";\nimport \"easymde/dist/easymde.min.css\";\nimport VueSimpleRangeSlider from \"vue-simple-range-slider/vue2\";\nimport \"vue-simple-range-slider/vue2/css\";\nimport Vue from \"vue\";\nimport { BootstrapVue, IconsPlugin } from \"bootstrap-vue\";\n\n// Import Bootstrap and BootstrapVue CSS files (order is important)\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\nimport ElementUI from \"element-ui\";\nVue.use(ElementUI);\n// Make BootstrapVue available throughout your project\nVue.use(BootstrapVue);\nexport default {\n  name: \"WritingAssitantShow_2\",\n  components: {\n    VueMarkdown,\n    EasyMDE,\n    VueSimpleRangeSlider\n  },\n  mounted() {\n    this.fetchData();\n    // this.enableEditMode();\n    this.getExample();\n    this.addSurveyListener();\n    this.scrollToTop();\n    //  检查是否是登录用户\n  },\n\n  data() {\n    return {\n      Pid: \"\",\n      testData: \"\",\n      edit: false,\n      p_edit: false,\n      sliderBool: false,\n      markdownContent: \"\",\n      prompts: null,\n      my_prompts: null,\n      drawer: false,\n      my_drawer: false,\n      direction: \"rtl\",\n      experience: \"\",\n      feelings: \"\",\n      // language style\n      promptC1: \"Now you will write a supportive message (1-200 words) based on the linguistic style of a person.\\\n      I will first provide you with a few messages that the person wrote, and you need to learn the linguistic style, including function words, formality, positivity, verbosity, and directness.\\\n      No need to show the results of the linguistic style analysis.\\\n      Formality refers to the extent to which the text is formal. Positivity refers to the extent to which the text carries positive sentiments. \\\n      Verbosity pertains to the wordiness of the text. Directness refers to the extent to which the text explicitly reveals the writer’s intentions.\",\n      promptC2: \"Please write a supportive message in response to the following support-seeking post. A good supportive message might: (1) express emotions such as warmth, compassion, and concern; (2) convey understanding and explanation of feelings or experiences; and (3) delve deeper into feelings and experiences, even if not directly mentioned.\\\n      Please also incorporate the person’s experiences into the supportive message. Please also incorporate the person’s experiences into the supportive message. \",\n      promptC3: \"Please write a supportive message in response to the following support-seeking post, based on the linguistic style you learned. A good supportive message might: (1) express emotions such as warmth, compassion, and concern; (2) convey understanding and explanation of feelings or experiences; and (3) delve deeper into feelings and experiences, even if not directly mentioned.\\\n      Please also incorporate the person’s thoughts and feelings into the supportive message.\",\n      Prompt: \"Now you will write a supportive message (1-200 words) in response to the following support-seeking post.\\\n      (1) express emotions such as warmth, compassion, and concern; (2) convey understanding and explanation of feelings or experiences;\\\n      and (3) delve deeper into feelings and experiences, even if not directly mentioned.\",\n      seekingPost: [\"I feel like a loser because my kids are getting older (7 and 8) and I never do anything on the weekends with them.\\\n        They just sit downstairs playing video games and watching tv. My son has autism and doing anything with him is very difficult.\\\n        I myself do not have any parent friends that I can take my kids on play dates with. My kids also don't really have many friends either.\\\n        I feel like I am socially isolated and my only relief from home is work. I work overtime just to get out of the house and not be home.\\\n        Can anyone here relate and how did you get past this phase of your life?\\\n        It's been like this for two years and I'm getting more and more socially awkward with people in general due to this social anxiety of feeling like myself and my kids just don't have a life.\", \"I’ve been staying up until 5am playing video games and then sleeping until 3-4pm everyday \\n\\\n        I have no desire to get up earlier and do something with my day even though if I could force myself I’d probably feel better.\\\n        It starts to get dark within an hour of waking up usually and it’s so depressing but it keeps me isolated in my “comfort zone”.\\\n        Being up in the middle of the night feels freeing for some reason, no one awake, no guilt for responsibilities, I can sleep away the day and not feel guilty about it.\\\n        But I’m wasting time and I want more than anything to feel okay again.\\\n        I want to start to get my life back to something that I can derive some genuine enjoyment out of and move forward with productive things.\\\n        I became depressed again about 10 months ago since my mom passed and these past 10 months have gone by so fast, I’m almost 26 and I’m scared at how fast time is moving without any stability forming in my life.\", \"My parents cannot afford to retire and do not own their home.\\n\\\n        I (F22) am an only child to my parents (Mom is 62 and Dad is 60) who got started late in life. We lived in a trailer until I was about 7 years old,\\\n        and then we started renting our very first home. Fast forward to now, they bought a home 4 years ago after downsizing drastically but they still won't ever be able to afford it.\\\n        (We live in the Seattle area if that helps paint a picture). They both work very laborious jobs and their health is getting quite bad.\\\n        My mom was in the hospital and had 2 emergency operations last month. Since then, they've been admitting to me how truly depressed and scared they are.\\\n        Not just for themselves, but for me. I am dealing with my own health issues and lost my career due to being unable to work. I don't have any money now either and rely heavily on my parents as they are my only family and support system.\\\n        My dad told me that he's deeply sorry he wasn't able to send me to college and that I will have to find someone who is willing and financially able to care for me soon, because my parents won't be around much longer.\\\n        I am so scared of the future, and I feel like I'm the only 22 year old feeling the pressures of taking care of her aging parents while having no money and poor health myself. I don't know what to do. I wish my parents could stay home and take it easy as they deserve... Any advice helps.\\\n        \"],\n      beforeEdit: \"\",\n      inputText: \"\",\n      mimicWriting: \"\",\n      example1: sessionStorage.getItem(\"example1\"),\n      example2: sessionStorage.getItem(\"example2\"),\n      example3: sessionStorage.getItem(\"example3\"),\n      experience: \"\",\n      thought: \"\",\n      // models:['gpt-3.5-turbo', 'gpt-3.5-turbo-16k', 'gpt-4'],\n      models: [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\"],\n      selectedItem: \"gpt-4\",\n      editMode: true,\n      m_style: \"\",\n      markdownEditor: null,\n      markdownOutputEditor: null,\n      toAttitudinalBool: false,\n      toExperientialBool: false,\n      toStyleLearningBool: true,\n      loading: true,\n      gLoading: true,\n      surveyShow: false,\n      text: \"\",\n      nextPageBool: false,\n      condition: -1,\n      post: sessionStorage.getItem(\"main_1\")\n    };\n  },\n  methods: {\n    fetchData() {\n      console.log(\"ID: \", this.$route.query);\n      this.Pid = this.$route.query.Pid;\n      this.condition = this.$route.query.condition;\n      if (this.condition == \"5\") {\n        this.nextPageBool = true;\n      }\n      this.experience = sessionStorage.getItem(\"experience_\" + this.post);\n      this.thought = sessionStorage.getItem(\"thoughts_\" + this.post);\n      console.log(\"eperience\", this.experience);\n      console.log(\"though\", this.thought);\n      console.log(\"post\", this.post);\n      // console.log(\"post\", this.example1);\n    },\n\n    scrollToTop() {\n      window.scrollTo(1, 2);\n    },\n    messagePop(type, message) {\n      this.$message({\n        message: `${message}`,\n        type: `${type}`\n      });\n    },\n    enableOutputEditMode() {\n      const vm = this;\n      this.$nextTick(() => {\n        if (!this.markdownEditor) {\n          this.markdownEditor = new EasyMDE({\n            element: this.$refs.markdownEditor\n          });\n          //设计样式\n          const codemirrorScroll = document.getElementsByClassName(\"CodeMirror-scroll\")[0];\n          if (codemirrorScroll) {\n            codemirrorScroll.style.maxHeight = \"1000px\";\n            codemirrorScroll.style.overflowY = \"auto\";\n            console.log(\"output successfully set\");\n          }\n          if (this.condition == \"5\") {\n            // this.markdownEditor.value(this.text);\n            console.log(\"here\");\n            this.markdownEditor.codemirror.on(\"change\", () => {\n              vm.text = vm.markdownEditor.value();\n              console.log(vm.text); // 输出当前的输入值\n            });\n          } else {\n            this.markdownEditor.codemirror.setOption(\"readOnly\", true);\n          }\n        }\n      });\n    },\n    getExample() {\n      this.gloading = true;\n      this.loading = false;\n      if (this.condition != \"5\") {\n        console.log(\"getWrtingAssistantHelp\");\n        this.getWrtingAssistantHelp();\n      }\n      sessionStorage.setItem(\"main_task_start_\" + this.post, Date.now());\n      this.enableOutputEditMode();\n      this.addHashToLocation();\n    },\n    getWrtingAssistantHelp() {\n      console.log(\"currentPost:\", this.post);\n      prompt = \"\";\n      if (this.condition == \"1\") {\n        prompt = `${this.promptC1}\\n\n                    [Writing style sample 1]\\n\n                     ${this.example1}\\n\n                     [Writing style sample 2]\\n\n                     ${this.example2}\\n\n                     [Writing style sample 3]\\n\n                     ${this.example3}\\n\n                     Then, write a supportive message in response to the following support-seeking post, based on the linguistic style you learned.\\n\n                     ${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n      if (this.condition == \"2\") {\n        prompt = `${this.Prompt}\\n\n                    [personal experience]\\n\n                      ${this.experience}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n      if (this.condition == \"3\") {\n        prompt = `${this.Prompt}\\n\n        [personal thoughts/feelings]\\n\n                    ${this.thought}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n      if (this.condition == \"4\") {\n        prompt = `${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n      console.log(\"提交的数据是：\", prompt);\n      http.post(\"/writing_assistant/\", {\n        prompt: prompt,\n        model: this.selectedItem,\n        user: this.Pid,\n        post: this.post\n      }).then(res => {\n        this.markdownEditor.value(res.data.content);\n        this.mimicWriting = res.data.content;\n        this.gLoading = false;\n        this.surveyShow = true;\n        sessionStorage.setItem(\"main_task_end_\" + this.post, Date.now());\n        console.log(\"output Text:\", res.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    humanWritingsubmitWriting() {\n      let count = 0;\n      for (let i = 0; i < this.text.split(\" \").length; i++) {\n        if (this.text.split(\" \")[i] !== \"\") {\n          count++;\n        }\n      }\n      if (count <= 50) {\n        this.messagePop(\"error\", \"Please provide a writing sample of more than 50 words. The current word count is \" + count + \".\");\n        return;\n      }\n      this.messagePop(\"success\", \"Support message submitted\");\n      http.post(\"/update_support_message/\", {\n        pid: this.Pid,\n        post: this.post,\n        text: this.text\n      }).then(res => {\n        this.surveyShow = true;\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    submitWriting() {\n      if (this.condition == \"5\") {\n        this.$router.push({\n          path: \"/writing_assitant_show_3\",\n          query: {\n            Pid: this.Pid,\n            condition: this.condition\n          }\n        });\n      } else {\n        this.$router.push({\n          path: \"/edit_writing_2\",\n          query: {\n            Pid: this.Pid,\n            condition: this.condition\n          }\n        });\n      }\n    },\n    addSurveyListener() {\n      window.addEventListener(\"message\", e => {\n        console.log(e);\n        if (e.origin.includes(\"https://nus.syd1.qualtrics.com\") && e.data.includes(\"QualtricsEOS|SV_1RB8EWvsV7a5iFU\")) {\n          console.log(\"survey end\");\n          this.submitWriting();\n        }\n      });\n    },\n    addHashToLocation() {\n      let params = \"?PID=\" + this.Pid + \"&condition=\" + this.condition + \"&post=\" + this.post;\n      // history.pushState({}, null, this.$route.path + \"#\" + params);\n      const iframe = this.$refs.Iframe;\n      iframe.src = \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RB8EWvsV7a5iFU\" + params;\n    }\n  },\n  updated() {\n    if (this.condition == \"5\") this.gLoading = false;\n  }\n};","map":{"version":3,"names":["http","VueMarkdown","EasyMDE","VueSimpleRangeSlider","Vue","BootstrapVue","IconsPlugin","ElementUI","use","name","components","mounted","fetchData","getExample","addSurveyListener","scrollToTop","data","Pid","testData","edit","p_edit","sliderBool","markdownContent","prompts","my_prompts","drawer","my_drawer","direction","experience","feelings","promptC1","promptC2","promptC3","Prompt","seekingPost","beforeEdit","inputText","mimicWriting","example1","sessionStorage","getItem","example2","example3","thought","models","selectedItem","editMode","m_style","markdownEditor","markdownOutputEditor","toAttitudinalBool","toExperientialBool","toStyleLearningBool","loading","gLoading","surveyShow","text","nextPageBool","condition","post","methods","console","log","$route","query","window","scrollTo","messagePop","type","message","$message","enableOutputEditMode","vm","$nextTick","element","$refs","codemirrorScroll","document","getElementsByClassName","style","maxHeight","overflowY","codemirror","on","value","setOption","gloading","getWrtingAssistantHelp","setItem","Date","now","addHashToLocation","prompt","parseInt","model","user","then","res","content","catch","e","humanWritingsubmitWriting","count","i","split","length","pid","submitWriting","$router","push","path","addEventListener","origin","includes","params","iframe","Iframe","src","updated"],"sources":["src/components/WritingAssitantShow_2.vue"],"sourcesContent":["@import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');\n\n\n<template>\n  <div>\n    <header class=\"header-slot\">\n      <slot name=\"header\"><h4>Support message web</h4></slot>\n    </header>\n\n    <div class=\"container\">\n      <!-- <b-row v-show=\"currentTask != '2 ' && condition != 3\" align=\"center\">\n        <p style=\"font-size: 2.5rem\">Example of your support message:</p>\n      </b-row> -->\n      <el-row :gutter=\"20\">\n        <el-col :span=\"12\">\n          <div v-loading=\"loading\" element-loading-text=\"loading...\">\n            <!--Task1-->\n            <div v-show=\"post == '1'\" class=\"grid-content-post2 bg-light\">\n              <!-- <div class=\"grid-content-post2 bg-light\"> -->\n              <div\n                class=\"fr-view u-clearfix u-hover-feature u-rich-text u-text u-text-1\"\n                data-animation-name=\"\"\n                data-animation-duration=\"0\"\n                data-animation-direction=\"\"\n              >\n                <h5 style=\"text-align: left\">\n                  <span style=\"font-size: 1.8rem\">\n                    Subject: I feel like I have nothing to do on the weekends\n                    with my kids.\n\n                    <br />\n                  </span>\n                </h5>\n\n                <hr />\n\n                <p><br /></p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  I feel like a loser because my kids are getting older (7 and\n                  8) and I never do anything on the weekends with them. They\n                  just sit downstairs playing video games and watching tv. My\n                  son has autism and doing anything with him is very difficult.\n                  I myself do not have any parent friends that I can take my\n                  kids on play dates with. My kids also don't really have many\n                  friends either. I feel like I am socially isolated and my only\n                  relief from home is work. I work overtime just to get out of\n                  the house and not be home.\n                </p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  Can anyone here relate and how did you get past this phase of\n                  your life? It's been like this for two years and I'm getting\n                  more and more socially awkward with people in general due to\n                  this social anxiety of feeling like myself and my kids just\n                  don't have a life.\n                </p>\n                <p><br /><br /><br /></p>\n              </div>\n              <!-- </div> -->\n            </div>\n\n            <!--Task2-->\n            <!-- <div\n              \n              class=\"grid-content-post bg-light\"\n            > -->\n            <div v-show=\"post == '2'\" class=\"grid-content-post2 bg-light\">\n              <div\n                class=\"fr-view u-clearfix u-hover-feature u-rich-text u-text u-text-1\"\n                data-animation-name=\"\"\n                data-animation-duration=\"0\"\n                data-animation-direction=\"\"\n              >\n                <h5 style=\"text-align: left\">\n                  <span style=\"font-size: 1.8rem\">\n                    Subject: I’ve been staying up until 5am playing video games\n                    and then sleeping until 3-4pm everyday\n\n                    <br />\n                  </span>\n                </h5>\n\n                <hr />\n\n                <p><br /></p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  I have no desire to get up earlier and do something with my\n                  day even though if I could force myself I’d probably feel\n                  better. It starts to get dark within an hour of waking up\n                  usually and it’s so depressing but it keeps me isolated in my\n                  “comfort zone”. Being up in the middle of the night feels\n                  freeing for some reason, no one awake, no guilt for\n                  responsibilities, I can sleep away the day and not feel guilty\n                  about it.\n                </p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  But I’m wasting time and I want more than anything to feel\n                  okay again. I want to start to get my life back to something\n                  that I can derive some genuine enjoyment out of and move\n                  forward with productive things.\n                </p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  I became depressed again about 10 months ago since my mom\n                  passed and these past 10 months have gone by so fast, I’m\n                  almost 26 and I’m scared at how fast time is moving without\n                  any stability forming in my life.\n                </p>\n                <p><br /><br /><br /></p>\n              </div>\n            </div>\n            <!-- </div> -->\n            <!--Task3-->\n            <!-- <div\n              \n              class=\"grid-content-post bg-light\"\n            > -->\n            <div v-show=\"post == '3'\" class=\"grid-content-post2 bg-light\">\n              <div\n                class=\"fr-view u-clearfix u-hover-feature u-rich-text u-text u-text-1\"\n                data-animation-name=\"\"\n                data-animation-duration=\"0\"\n                data-animation-direction=\"\"\n              >\n                <h5 style=\"text-align: left\">\n                  <span style=\"font-size: 1.8rem\">\n                    Subject: My parents cannot afford to retire and do not own\n                    their home.\n\n                    <br />\n                  </span>\n                </h5>\n\n                <hr />\n\n                <p><br /></p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  I (F22) am an only child to my parents (Mom is 62 and Dad is\n                  60) who got started late in life. We lived in a trailer until\n                  I was about 7 years old, and then we started renting our very\n                  first home. Fast forward to now, they bought a home 4 years\n                  ago after downsizing drastically but they still won't ever be\n                  able to afford it. (We live in the Seattle area if that helps\n                  paint a picture). They both work very laborious jobs and their\n                  health is getting quite bad.\n                </p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  My mom was in the hospital and had 2 emergency operations last\n                  month. Since then, they've been admitting to me how truly\n                  depressed and scared they are. Not just for themselves, but\n                  for me. I am dealing with my own health issues and lost my\n                  career due to being unable to work. I don't have any money now\n                  either and rely heavily on my parents as they are my only\n                  family and support system. My dad told me that he's deeply\n                  sorry he wasn't able to send me to college and that I will\n                  have to find someone who is willing and financially able to\n                  care for me soon, because my parents won't be around much\n                  longer.\n                </p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  I am so scared of the future, and I feel like I'm the only 22\n                  year old feeling the pressures of taking care of her aging\n                  parents while having no money and poor health myself. I don't\n                  know what to do. I wish my parents could stay home and take it\n                  easy as they deserve... Any advice helps.\n                </p>\n                <p><br /><br /><br /></p>\n              </div>\n            </div>\n          </div>\n        </el-col>\n        <el-col :span=\"12\">\n          <div\n            class=\"grid-content bg-light\"\n            v-loading=\"gLoading\"\n            element-loading-text=\"AI takes 30 to 60 seconds to generate content. Do not refresh the page.\"\n          >\n            <div class=\"label_container\" style=\"display: flex\">\n              <label\n                style=\"\n                  font-family: Roboto, RobotoDraft, Helvetica, Arial, sans-serif;\n                  font-size: large;\n                \"\n              ></label>\n            </div>\n            <textarea\n              id=\"outputArea\"\n              ref=\"markdownEditor\"\n              class=\"textarea\"\n            ></textarea>\n          </div>\n          <el-button\n            @click=\"humanWritingsubmitWriting\"\n            type=\"primary\"\n            v-show=\"nextPageBool\"\n            style=\"margin: 10px\"\n            >Submit</el-button\n          >\n        </el-col>\n      </el-row>\n      <div v-loading=\"loading\" element-loading-text=\"loading...\" class=\"survey\">\n        <iframe\n          v-show=\"surveyShow\"\n          ref=\"Iframe\"\n          width=\"100%\"\n          height=\"1300px\"\n        ></iframe>\n        <b-col align-v=\"center\">\n          <!-- <b-row align-self=\"center\"\n            ><center>\n              <p>Please first submit the survey then go to the next page.</p>\n            </center></b-row\n          > -->\n\n          <b-row align-self=\"center\"><center></center></b-row>\n        </b-col>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\n\nimport http from \"@/http\";\nimport VueMarkdown from \"vue-markdown\";\nimport EasyMDE from \"easymde\";\nimport \"easymde/dist/easymde.min.css\";\nimport VueSimpleRangeSlider from \"vue-simple-range-slider/vue2\";\nimport \"vue-simple-range-slider/vue2/css\";\nimport Vue from \"vue\";\nimport { BootstrapVue, IconsPlugin } from \"bootstrap-vue\";\n\n// Import Bootstrap and BootstrapVue CSS files (order is important)\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\nimport ElementUI from \"element-ui\";\n\nVue.use(ElementUI);\n// Make BootstrapVue available throughout your project\nVue.use(BootstrapVue);\n\nexport default {\n  name: \"WritingAssitantShow_2\",\n  components: {\n    VueMarkdown,\n    EasyMDE,\n    VueSimpleRangeSlider,\n  },\n\n  mounted() {\n    this.fetchData();\n    // this.enableEditMode();\n    this.getExample();\n    this.addSurveyListener();\n    this.scrollToTop();\n    //  检查是否是登录用户\n  },\n  data() {\n    return {\n      Pid: \"\",\n      testData: \"\",\n      edit: false,\n      p_edit: false,\n      sliderBool: false,\n      markdownContent: \"\",\n      prompts: null,\n      my_prompts: null,\n      drawer: false,\n      my_drawer: false,\n      direction: \"rtl\",\n      experience: \"\",\n      feelings: \"\",\n      // language style\n      promptC1:\n        \"Now you will write a supportive message (1-200 words) based on the linguistic style of a person.\\\n      I will first provide you with a few messages that the person wrote, and you need to learn the linguistic style, including function words, formality, positivity, verbosity, and directness.\\\n      No need to show the results of the linguistic style analysis.\\\n      Formality refers to the extent to which the text is formal. Positivity refers to the extent to which the text carries positive sentiments. \\\n      Verbosity pertains to the wordiness of the text. Directness refers to the extent to which the text explicitly reveals the writer’s intentions.\",\n\n      promptC2:\n        \"Please write a supportive message in response to the following support-seeking post. A good supportive message might: (1) express emotions such as warmth, compassion, and concern; (2) convey understanding and explanation of feelings or experiences; and (3) delve deeper into feelings and experiences, even if not directly mentioned.\\\n      Please also incorporate the person’s experiences into the supportive message. Please also incorporate the person’s experiences into the supportive message. \",\n\n      promptC3:\n        \"Please write a supportive message in response to the following support-seeking post, based on the linguistic style you learned. A good supportive message might: (1) express emotions such as warmth, compassion, and concern; (2) convey understanding and explanation of feelings or experiences; and (3) delve deeper into feelings and experiences, even if not directly mentioned.\\\n      Please also incorporate the person’s thoughts and feelings into the supportive message.\",\n\n      Prompt:\n        \"Now you will write a supportive message (1-200 words) in response to the following support-seeking post.\\\n      (1) express emotions such as warmth, compassion, and concern; (2) convey understanding and explanation of feelings or experiences;\\\n      and (3) delve deeper into feelings and experiences, even if not directly mentioned.\",\n\n      seekingPost: [\n        \"I feel like a loser because my kids are getting older (7 and 8) and I never do anything on the weekends with them.\\\n        They just sit downstairs playing video games and watching tv. My son has autism and doing anything with him is very difficult.\\\n        I myself do not have any parent friends that I can take my kids on play dates with. My kids also don't really have many friends either.\\\n        I feel like I am socially isolated and my only relief from home is work. I work overtime just to get out of the house and not be home.\\\n        Can anyone here relate and how did you get past this phase of your life?\\\n        It's been like this for two years and I'm getting more and more socially awkward with people in general due to this social anxiety of feeling like myself and my kids just don't have a life.\",\n\n        \"I’ve been staying up until 5am playing video games and then sleeping until 3-4pm everyday \\n\\\n        I have no desire to get up earlier and do something with my day even though if I could force myself I’d probably feel better.\\\n        It starts to get dark within an hour of waking up usually and it’s so depressing but it keeps me isolated in my “comfort zone”.\\\n        Being up in the middle of the night feels freeing for some reason, no one awake, no guilt for responsibilities, I can sleep away the day and not feel guilty about it.\\\n        But I’m wasting time and I want more than anything to feel okay again.\\\n        I want to start to get my life back to something that I can derive some genuine enjoyment out of and move forward with productive things.\\\n        I became depressed again about 10 months ago since my mom passed and these past 10 months have gone by so fast, I’m almost 26 and I’m scared at how fast time is moving without any stability forming in my life.\",\n\n        \"My parents cannot afford to retire and do not own their home.\\n\\\n        I (F22) am an only child to my parents (Mom is 62 and Dad is 60) who got started late in life. We lived in a trailer until I was about 7 years old,\\\n        and then we started renting our very first home. Fast forward to now, they bought a home 4 years ago after downsizing drastically but they still won't ever be able to afford it.\\\n        (We live in the Seattle area if that helps paint a picture). They both work very laborious jobs and their health is getting quite bad.\\\n        My mom was in the hospital and had 2 emergency operations last month. Since then, they've been admitting to me how truly depressed and scared they are.\\\n        Not just for themselves, but for me. I am dealing with my own health issues and lost my career due to being unable to work. I don't have any money now either and rely heavily on my parents as they are my only family and support system.\\\n        My dad told me that he's deeply sorry he wasn't able to send me to college and that I will have to find someone who is willing and financially able to care for me soon, because my parents won't be around much longer.\\\n        I am so scared of the future, and I feel like I'm the only 22 year old feeling the pressures of taking care of her aging parents while having no money and poor health myself. I don't know what to do. I wish my parents could stay home and take it easy as they deserve... Any advice helps.\\\n        \",\n      ],\n\n      beforeEdit: \"\",\n      inputText: \"\",\n\n      mimicWriting: \"\",\n      example1: sessionStorage.getItem(\"example1\"),\n      example2: sessionStorage.getItem(\"example2\"),\n      example3: sessionStorage.getItem(\"example3\"),\n      experience: \"\",\n      thought: \"\",\n      // models:['gpt-3.5-turbo', 'gpt-3.5-turbo-16k', 'gpt-4'],\n      models: [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\"],\n      selectedItem: \"gpt-4\",\n\n      editMode: true,\n      m_style: \"\",\n      markdownEditor: null,\n\n      markdownOutputEditor: null,\n\n      toAttitudinalBool: false,\n      toExperientialBool: false,\n      toStyleLearningBool: true,\n      loading: true,\n      gLoading: true,\n      surveyShow: false,\n      text: \"\",\n      nextPageBool: false,\n      condition: -1,\n      post: sessionStorage.getItem(\"main_1\"),\n    };\n  },\n\n  methods: {\n    fetchData() {\n      console.log(\"ID: \", this.$route.query);\n      this.Pid = this.$route.query.Pid;\n      this.condition = this.$route.query.condition;\n      if (this.condition == \"5\") {\n        this.nextPageBool = true;\n      }\n      this.experience = sessionStorage.getItem(\"experience_\" + this.post);\n      this.thought = sessionStorage.getItem(\"thoughts_\" + this.post);\n      console.log(\"eperience\", this.experience);\n      console.log(\"though\", this.thought);\n      console.log(\"post\", this.post);\n      // console.log(\"post\", this.example1);\n    },\n\n    scrollToTop() {\n      window.scrollTo(1, 2);\n    },\n\n    messagePop(type, message) {\n      this.$message({\n        message: `${message}`,\n        type: `${type}`,\n      });\n    },\n\n    enableOutputEditMode() {\n      const vm = this;\n      this.$nextTick(() => {\n        if (!this.markdownEditor) {\n          this.markdownEditor = new EasyMDE({\n            element: this.$refs.markdownEditor,\n          });\n          //设计样式\n          const codemirrorScroll =\n            document.getElementsByClassName(\"CodeMirror-scroll\")[0];\n          if (codemirrorScroll) {\n            codemirrorScroll.style.maxHeight = \"1000px\";\n            codemirrorScroll.style.overflowY = \"auto\";\n            console.log(\"output successfully set\");\n          }\n\n          if (this.condition == \"5\") {\n            // this.markdownEditor.value(this.text);\n            console.log(\"here\");\n            this.markdownEditor.codemirror.on(\"change\", () => {\n              vm.text = vm.markdownEditor.value();\n              console.log(vm.text); // 输出当前的输入值\n            });\n          } else {\n            this.markdownEditor.codemirror.setOption(\"readOnly\", true);\n          }\n        }\n      });\n    },\n\n    getExample() {\n      this.gloading = true;\n      this.loading = false;\n\n      if (this.condition != \"5\") {\n        console.log(\"getWrtingAssistantHelp\");\n        this.getWrtingAssistantHelp();\n      }\n      sessionStorage.setItem(\"main_task_start_\" + this.post, Date.now());\n      this.enableOutputEditMode();\n\n      this.addHashToLocation();\n    },\n\n    getWrtingAssistantHelp() {\n      console.log(\"currentPost:\", this.post);\n      prompt = \"\";\n      if (this.condition == \"1\") {\n        prompt = `${this.promptC1}\\n\n                    [Writing style sample 1]\\n\n                     ${this.example1}\\n\n                     [Writing style sample 2]\\n\n                     ${this.example2}\\n\n                     [Writing style sample 3]\\n\n                     ${this.example3}\\n\n                     Then, write a supportive message in response to the following support-seeking post, based on the linguistic style you learned.\\n\n                     ${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n      if (this.condition == \"2\") {\n        prompt = `${this.Prompt}\\n\n                    [personal experience]\\n\n                      ${this.experience}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n      if (this.condition == \"3\") {\n        prompt = `${this.Prompt}\\n\n        [personal thoughts/feelings]\\n\n                    ${this.thought}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n      if (this.condition == \"4\") {\n        prompt = `${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[parseInt(this.post) - 1]}\\n `;\n      }\n\n      console.log(\"提交的数据是：\", prompt);\n      http\n        .post(\"/writing_assistant/\", {\n          prompt: prompt,\n          model: this.selectedItem,\n          user: this.Pid,\n          post: this.post,\n        })\n        .then((res) => {\n          this.markdownEditor.value(res.data.content);\n          this.mimicWriting = res.data.content;\n          this.gLoading = false;\n          this.surveyShow = true;\n          sessionStorage.setItem(\"main_task_end_\" + this.post, Date.now());\n          console.log(\"output Text:\", res.data);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n\n    humanWritingsubmitWriting() {\n      let count = 0;\n      for (let i = 0; i < this.text.split(\" \").length; i++) {\n        if (this.text.split(\" \")[i] !== \"\") {\n          count++;\n        }\n      }\n      if (count <= 50) {\n        this.messagePop(\n          \"error\",\n          \"Please provide a writing sample of more than 50 words. The current word count is \" +\n            count +\n            \".\"\n        );\n        return;\n      }\n      this.messagePop(\"success\", \"Support message submitted\");\n\n      http\n        .post(\"/update_support_message/\", {\n          pid: this.Pid,\n          post: this.post,\n          text: this.text,\n        })\n        .then((res) => {\n          this.surveyShow = true;\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n    submitWriting() {\n      if (this.condition == \"5\") {\n        this.$router.push({\n          path: \"/writing_assitant_show_3\",\n          query: {\n            Pid: this.Pid,\n            condition: this.condition,\n          },\n        });\n      } else {\n        this.$router.push({\n          path: \"/edit_writing_2\",\n          query: {\n            Pid: this.Pid,\n            condition: this.condition,\n          },\n        });\n      }\n    },\n\n    addSurveyListener() {\n      window.addEventListener(\"message\", (e) => {\n        console.log(e);\n        if (\n          e.origin.includes(\"https://nus.syd1.qualtrics.com\") &&\n          e.data.includes(\"QualtricsEOS|SV_1RB8EWvsV7a5iFU\")\n        ) {\n          console.log(\"survey end\");\n          this.submitWriting();\n        }\n      });\n    },\n    addHashToLocation() {\n      let params =\n        \"?PID=\" +\n        this.Pid +\n        \"&condition=\" +\n        this.condition +\n        \"&post=\" +\n        this.post;\n      // history.pushState({}, null, this.$route.path + \"#\" + params);\n      const iframe = this.$refs.Iframe;\n      iframe.src =\n        \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RB8EWvsV7a5iFU\" + params;\n    },\n  },\n  updated() {\n    if (this.condition == \"5\") this.gLoading = false;\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  background: white;\n  width: 75%;\n  height: auto;\n  margin: auto;\n}\n.header {\n  margin-left: 4em;\n  /*margin-top: 4em;*/\n  padding-top: 4em;\n  display: flex;\n}\n\n.button {\n  /*width: 100px;*/\n  width: 10%;\n}\n\n.drop-item {\n  /*width: 500px;*/\n  font-family: ColfaxAI, helvetica, sans-serif;\n  font-size: small;\n  /*white-space: normal;*/\n  /*word-wrap: break-word;*/\n}\n\n.translate-container {\n  padding: 20px;\n}\n\n.grid-content {\n  height: auto;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n.grid-content-2 {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.grid-content-post {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.grid-content-post2 {\n  height: auto;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.slider-content {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n  padding-right: 4em;\n}\n\n.bg-light {\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.textarea {\n  padding-top: 1em;\n  padding-left: 1em;\n  padding-right: 1em;\n  padding-bottom: 1em;\n  height: 550px;\n\n  /*font-family: 'Arial', sans-serif; !* 这将更改字体 *!*/\n  font-family: \"Roboto\", sans-serif;\n  font-size: 16px; /* 这将更改字体大小 */\n  color: #333; /* 这将更改文本颜色 */\n  line-height: 1.5; /* 这将更改行高 */\n  letter-spacing: 0.05em; /* 这将更改字符间距 */\n  text-align: justify; /* 这将使文本两端对齐 */\n  overflow-y: scroll;\n}\n\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n\n.el-menu-item i {\n  float: right;\n  margin-top: 5px;\n  cursor: pointer;\n}\n\n.example {\n  background: #ffffff;\n  margin: 20px;\n  border-color: #e7e7e7;\n  padding: 40px;\n}\n\n.header-slot {\n  background: #d4e6ff;\n  padding: 20px 100px;\n  position: sticky;\n  top: 0;\n  /* z-index: 10000; */\n}\n</style>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}