{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport http from \"@/http\";\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      form: {\n        username: ''\n        // password: '',\n      }\n    };\n  },\n\n  methods: {\n    messagePop(type, message) {\n      this.$message({\n        message: `${message}`,\n        type: `${type}`\n      });\n    },\n    jumpyTo(url) {\n      if (this.$router.currentRoute.path !== url) {\n        this.$router.push(url);\n      }\n    },\n    fetchID() {\n      // Get the value of the 'PROLIFIC_PID' parameter from the current URL\n      const urlParams = new URLSearchParams(window.location.search);\n      const prolificPID = urlParams.get('PROLIFIC_PID');\n\n      // Update the 'username' variable with the value of 'PROLIFIC_PID'\n      if (prolificPID) {\n        this.form.username = prolificPID;\n      }\n    },\n    // login() {\n    //   // Handle login logic here\n    //   // console.log(this.form);\n    //   http.post('/login/',{\n    //     name: this.form.username,\n    //     pwd: this.form.password,\n    //   }).then(res => {\n    //     console.log('successfully login')\n    //     console.log(res)\n    //     sessionStorage.setItem('username', this.form.username)\n    //     this.messagePop('success', \"successfully login!!\")\n    //     this.jumpyTo(\"/writing_assistant\")\n    //   //  同时也可以在后端为 single_fileupload 创建一个文件夹\n    //   //  后面还可以再后端为 multiple_fileupload 创建一个文件夹\n\n    //   }).catch(e=>{\n    //     console.log(\"login\", e)\n    //     this.messagePop('error', \"login error, wrong username or password\")\n    //   })\n    // },\n\n    signUp() {\n      console.log(this.form);\n      console.log(this.form.username);\n      http.post('/signup/', {\n        name: this.form.username\n        // pwd: this.form.password,\n      }).then(res => {\n        console.log('successfully sign up');\n        console.log(res);\n        if (res.data.success) {\n          this.messagePop('success', 'successfully sign up');\n          sessionStorage.setItem('username', this.form.username);\n          this.messagePop('success', \"successfully login!!\");\n          this.jumpyTo(\"/writing_assistant\");\n        } else {\n          this.messagePop('error', \"please try another username\");\n        }\n      }).catch(e => {\n        console.log(\"sign up error\", e);\n        this.messagePop('error', \"please try another username\");\n      });\n    }\n  },\n  beforeMount() {\n    this.fetchID();\n  }\n};","map":{"version":3,"names":["http","name","data","form","username","methods","messagePop","type","message","$message","jumpyTo","url","$router","currentRoute","path","push","fetchID","urlParams","URLSearchParams","window","location","search","prolificPID","get","signUp","console","log","post","then","res","success","sessionStorage","setItem","catch","e","beforeMount"],"sources":["/Users/lee/Downloads/writing_assistant/wa_front/src/components/LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n<!--        <span>Login</span>-->\n        <img src=\"/imgs/ai4sg_logo.png\" alt=\"Logo\" class=\"logo\">\n      </div>\n      <el-form :model=\"form\" label-width=\"120px\">\n        <el-form-item label=\"Prolific ID\">\n          <el-input v-model=\"form.username\"></el-input>\n        </el-form-item>\n        <!-- <el-form-item label=\"Password\">\n          <el-input type=\"password\" v-model=\"form.password\"></el-input>\n        </el-form-item> -->\n        <div class=\"button\">\n          <el-button type=\"primary\" @click=\"signUp\">Login</el-button>\n        </div>\n        <!-- <el-button type=\"primary\" @click=\"signUp\">Sign Up</el-button> -->\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport http from \"@/http\";\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      form: {\n        username: '',\n        // password: '',\n      }\n    };\n  },\n  methods: {\n    messagePop(type, message){\n      this.$message({\n        message: `${message}`,\n        type: `${type}`\n      });\n    },\n    jumpyTo(url){\n      if(this.$router.currentRoute.path !== url){\n        this.$router.push(url)\n      }\n    },\n    fetchID() {\n      // Get the value of the 'PROLIFIC_PID' parameter from the current URL\n      const urlParams = new URLSearchParams(window.location.search);\n      const prolificPID = urlParams.get('PROLIFIC_PID');\n\n      // Update the 'username' variable with the value of 'PROLIFIC_PID'\n      if (prolificPID) {\n        this.form.username = prolificPID;\n      }\n    },\n    // login() {\n    //   // Handle login logic here\n    //   // console.log(this.form);\n    //   http.post('/login/',{\n    //     name: this.form.username,\n    //     pwd: this.form.password,\n    //   }).then(res => {\n    //     console.log('successfully login')\n    //     console.log(res)\n    //     sessionStorage.setItem('username', this.form.username)\n    //     this.messagePop('success', \"successfully login!!\")\n    //     this.jumpyTo(\"/writing_assistant\")\n    //   //  同时也可以在后端为 single_fileupload 创建一个文件夹\n    //   //  后面还可以再后端为 multiple_fileupload 创建一个文件夹\n\n    //   }).catch(e=>{\n    //     console.log(\"login\", e)\n    //     this.messagePop('error', \"login error, wrong username or password\")\n    //   })\n    // },\n\n\n    signUp(){\n      console.log(this.form)\n      console.log(this.form.username)\n      http.post('/signup/',{\n        name: this.form.username,\n        // pwd: this.form.password,\n      }).then(res => {\n        console.log('successfully sign up')\n        console.log(res)\n        if(res.data.success){\n          this.messagePop('success', 'successfully sign up',)\n          sessionStorage.setItem('username', this.form.username)\n          this.messagePop('success', \"successfully login!!\")\n          this.jumpyTo(\"/writing_assistant\")\n        }else {\n          this.messagePop('error', \"please try another username\")\n        }\n      }).catch(e=>{\n        console.log(\"sign up error\", e)\n        this.messagePop('error', \"please try another username\")\n      })\n    }\n  },\n  beforeMount() {\n   this.fetchID()\n},\n}\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n.box-card {\n  width: 30%;\n}\n\n.logo {\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  width: 20%;\n}\n\n.button{\n  display: block;\n  margin-left: auto;\n  /* margin-right: auto; */\n  width: 20%;\n}\n</style>"],"mappings":";;;;AAwBA,OAAOA,IAAG,MAAO,QAAQ;AAEzB,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE;QACV;MACF;IACF,CAAC;EACH,CAAC;;EACDC,OAAO,EAAE;IACPC,UAAUA,CAACC,IAAI,EAAEC,OAAO,EAAC;MACvB,IAAI,CAACC,QAAQ,CAAC;QACZD,OAAO,EAAG,GAAEA,OAAQ,EAAC;QACrBD,IAAI,EAAG,GAAEA,IAAK;MAChB,CAAC,CAAC;IACJ,CAAC;IACDG,OAAOA,CAACC,GAAG,EAAC;MACV,IAAG,IAAI,CAACC,OAAO,CAACC,YAAY,CAACC,IAAG,KAAMH,GAAG,EAAC;QACxC,IAAI,CAACC,OAAO,CAACG,IAAI,CAACJ,GAAG;MACvB;IACF,CAAC;IACDK,OAAOA,CAAA,EAAG;MACR;MACA,MAAMC,SAAQ,GAAI,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;MAC7D,MAAMC,WAAU,GAAIL,SAAS,CAACM,GAAG,CAAC,cAAc,CAAC;;MAEjD;MACA,IAAID,WAAW,EAAE;QACf,IAAI,CAACnB,IAAI,CAACC,QAAO,GAAIkB,WAAW;MAClC;IACF,CAAC;IACD;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;;IAGAE,MAAMA,CAAA,EAAE;MACNC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACvB,IAAI;MACrBsB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACvB,IAAI,CAACC,QAAQ;MAC9BJ,IAAI,CAAC2B,IAAI,CAAC,UAAU,EAAC;QACnB1B,IAAI,EAAE,IAAI,CAACE,IAAI,CAACC;QAChB;MACF,CAAC,CAAC,CAACwB,IAAI,CAACC,GAAE,IAAK;QACbJ,OAAO,CAACC,GAAG,CAAC,sBAAsB;QAClCD,OAAO,CAACC,GAAG,CAACG,GAAG;QACf,IAAGA,GAAG,CAAC3B,IAAI,CAAC4B,OAAO,EAAC;UAClB,IAAI,CAACxB,UAAU,CAAC,SAAS,EAAE,sBAAuB;UAClDyB,cAAc,CAACC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC7B,IAAI,CAACC,QAAQ;UACrD,IAAI,CAACE,UAAU,CAAC,SAAS,EAAE,sBAAsB;UACjD,IAAI,CAACI,OAAO,CAAC,oBAAoB;QACnC,CAAC,MAAK;UACJ,IAAI,CAACJ,UAAU,CAAC,OAAO,EAAE,6BAA6B;QACxD;MACF,CAAC,CAAC,CAAC2B,KAAK,CAACC,CAAC,IAAE;QACVT,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEQ,CAAC;QAC9B,IAAI,CAAC5B,UAAU,CAAC,OAAO,EAAE,6BAA6B;MACxD,CAAC;IACH;EACF,CAAC;EACD6B,WAAWA,CAAA,EAAG;IACb,IAAI,CAACnB,OAAO,CAAC;EAChB;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}