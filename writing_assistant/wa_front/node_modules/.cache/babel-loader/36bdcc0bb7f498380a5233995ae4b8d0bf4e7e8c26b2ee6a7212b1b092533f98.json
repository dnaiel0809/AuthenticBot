{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\n\nimport http from \"@/http\";\nimport VueMarkdown from \"vue-markdown\";\nimport EasyMDE from \"easymde\";\nimport \"easymde/dist/easymde.min.css\";\nimport VueSimpleRangeSlider from \"vue-simple-range-slider/vue2\";\nimport \"vue-simple-range-slider/vue2/css\";\nimport Vue from \"vue\";\nimport { BootstrapVue, IconsPlugin } from \"bootstrap-vue\";\n\n// Import Bootstrap and BootstrapVue CSS files (order is important)\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\nimport ElementUI from \"element-ui\";\nVue.use(ElementUI);\n// Make BootstrapVue available throughout your project\nVue.use(BootstrapVue);\nexport default {\n  name: \"WritingAssitantShow\",\n  components: {\n    VueMarkdown,\n    EasyMDE,\n    VueSimpleRangeSlider\n  },\n  mounted() {\n    this.fetchData();\n    // this.enableEditMode();\n\n    this.getWrtingStyleAndOrder();\n    this.enableOutputEditMode();\n    this.addSurveyListener();\n    this.scrollToTop();\n    //  检查是否是登录用户\n  },\n\n  data() {\n    return {\n      Pid: \"\",\n      testData: \"\",\n      edit: false,\n      p_edit: false,\n      sliderBool: false,\n      markdownContent: \"\",\n      prompts: null,\n      my_prompts: null,\n      drawer: false,\n      my_drawer: false,\n      direction: \"rtl\",\n      PromptRW: \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned. \\\n        Write a supportive message in response to the help-seeking post below, using the linguistic style, including functions words and communication styles, that you identified: \",\n      Prompt: \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned.\\\n        Write a supportive message in response to the help-seeking post below.\",\n      seekingPost: [\"Subject: Just found out I'm being let go from my job today. What the fuck do i do?:\\n\\\n        Been with the place for 3 years and for the first 2ish years,\\\n        i thought I found my forever place. We had a meeting today and\\\n        at the end of it, they mention that despite a lot of other measures,\\\n        they're going to have to make a small number of staff cuts, and it\\\n        turns out that after asking my boss, I was one of the people they were\\\n        letting go. It's really frustrating. I was great at my job. The first year\\\n        I had a 10% raise and the second year I dealt with a lot of the extra work\\\n        that I did to finance and beyond my job description. But they gave me a standard\\\n        raise because of financials and now I'm being let go. I'm absolutely devastated. \\\n        I don't even know where to begin besides updating my resume. I'm so gutted.\", \"Subject: My fiance M/30 said something shocking to me 27/F. \\n\\\n         My fiance M/30 and I 27/F have been together for a year and \\\n         so we took an anniversary vacation. While we were traveling back,\\\n         I told him that I wanted to dye my hair, and he said \\\"You really \\\n         think your hair is the issue?\\\" When I asked what he meant, he said\\\n        \\\"Look at the way your shirt is stretched over your gut\\\" When I \\\n        reminded him I've lost 20 pounds and he's always complimented my \\\n        body, he said \\\"That was laying down. Standing up I see your shirt \\\n        stretched over your gut and it looks so disgusting to me\\\" I started\\\n        crying from shock and he said \\\"I'm not dealing with you crying over\\\n        every little thing, this is pathetic, I'm telling you the truth so\\\n        you don't get fat.\\\" (I work out 5x a week, cook us healthy meals,\\\n        and avoid sweets.) We are set to move and get married in 2 months.\\\n        I love him and the life we've built but I am devastated by his\\\n        comments. I need advice on what to do next, and if he's right and\\\n        I'm being too sensitive. TIA!\"],\n      beforeEdit: \"\",\n      inputText: \"\",\n      mimicWriting: \"\",\n      style: \"\",\n      // models:['gpt-3.5-turbo', 'gpt-3.5-turbo-16k', 'gpt-4'],\n      models: [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\"],\n      selectedItem: \"gpt-4\",\n      editMode: true,\n      m_style: \"\",\n      markdownEditor: null,\n      markdownOutputEditor: null,\n      toAttitudinalBool: false,\n      toExperientialBool: false,\n      toStyleLearningBool: true,\n      loading: true,\n      gLoading: true,\n      text: \"\",\n      currentTab: \"Home\",\n      tabs: [\"Home\", \"Posts\", \"Archive\"],\n      nextPageBool: false,\n      order: [],\n      currentTask: 0,\n      condition: -1,\n      post: \"1\"\n    };\n  },\n  methods: {\n    fetchData() {\n      console.log(\"ID: \", this.$route.query);\n      this.Pid = this.$route.query.Pid;\n      this.condition = this.$route.query.condition;\n      this.post = this.$route.query.post;\n\n      // \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie?username=\" +\n      // this.Pid;\n    },\n\n    jumpyTo(url) {\n      if (this.$router.currentRoute.path !== url) {\n        this.$router.push({\n          path: url,\n          query: {\n            Pid: this.Pid,\n            condition: this.condition\n          }\n        });\n      }\n    },\n    scrollToTop() {\n      window.scrollTo(1, 2);\n    },\n    messagePop(type, message) {\n      this.$message({\n        message: `${message}`,\n        type: `${type}`\n      });\n    },\n    enableOutputEditMode() {\n      const vm = this;\n      this.$nextTick(() => {\n        if (!this.markdownEditor) {\n          this.markdownEditor = new EasyMDE({\n            element: this.$refs.markdownEditor\n          });\n          //设计样式\n          const codemirrorScroll = document.getElementsByClassName(\"CodeMirror-scroll\")[0];\n          if (codemirrorScroll) {\n            codemirrorScroll.style.maxHeight = \"1000px\";\n            codemirrorScroll.style.overflowY = \"auto\";\n            console.log(\"output successfully set\");\n          }\n          if (this.condition == \"3\") {\n            // this.markdownEditor.value(this.text);\n            console.log(\"here\");\n            this.markdownEditor.codemirror.on(\"change\", () => {\n              vm.text = vm.markdownEditor.value();\n              console.log(vm.text); // 输出当前的输入值\n            });\n          } else {\n            this.markdownEditor.codemirror.setOption(\"readOnly\", true);\n          }\n        }\n      });\n    },\n    getWrtingStyleAndOrder() {\n      this.gloading = true;\n      // this.messagePop(\n      //   \"success\",\n      //   \"Take a few seconds to generate the support message. Please wait.\"\n      // );\n      http.post(\"/get_google_sheet_linguistic_style/\", {\n        pid: this.Pid,\n        condition: this.condition\n      }).then(res => {\n        this.loading = false;\n        this.currentTask = parseInt(res.data.current);\n        console.log(\"currentTask:\", this.currentTask);\n        this.order = [res.data.order1, res.data.order2];\n        this.condition = res.data.condition;\n        console.log(\"condition:\", this.condition);\n        console.log(\"order:\", this.order);\n        console.log(\"this.condition != '3'\", this.condition != \"3\");\n        if (this.order[this.currentTask] == \"1\") {\n          this.style = res.data.info_style;\n          console.log(\"info style:\", this.style);\n        }\n        if (this.order[this.currentTask] == \"2\") {\n          this.style = res.data.emo_style;\n          console.log(\"emo style:\", this.style);\n        }\n        this.addHashToLocation();\n        if (this.condition != \"3\") {\n          console.log(\"getWrtingAssistantHelp\");\n          this.getWrtingAssistantHelp();\n        }\n        this.post = this.order[this.currentTask];\n        this.uploadTime(\"main_task_start_\" + this.post);\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    getWrtingAssistantHelp() {\n      console.log(\"order:\", parseInt(this.order));\n      console.log(\"currentTask:\", parseInt(this.currentTask));\n      console.log(\"currentPost:\", this.order[parseInt(this.currentTask)]);\n      prompt = \"\";\n      if (this.condition == \"1\") {\n        prompt = `${this.PromptRW}\\n\n                     ${this.style}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[this.order[parseInt(this.currentTask)] - 1]}\\n `;\n      }\n      if (this.condition == \"2\") {\n        prompt = `${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[this.order[parseInt(this.currentTask)] - 1]}\\n `;\n      }\n      console.log(\"提交的数据是：\", prompt);\n      http.post(\"/writing_assistant/\", {\n        prompt: prompt,\n        model: this.selectedItem,\n        user: this.Pid,\n        post: this.post\n      }).then(res => {\n        this.markdownEditor.value(res.data.content);\n        this.mimicWriting = res.data.content;\n        this.gLoading = false;\n        console.log(\"output Text:\", res.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    refreshDrawer() {\n      this.drawer = true;\n    },\n    submitWriting() {\n      this.uploadTime(\"main_task_end_\" + this.post);\n      http.post(\"/update_current_task/\", {\n        pid: this.Pid\n      }).then(res => {\n        this.currentTask = res.data.current;\n        console.log(\"order:\", res);\n      }).catch(e => {\n        console.log(e);\n      });\n      if (this.condition == \"3\") {\n        http.post(\"/update_support_message/\", {\n          pid: this.Pid,\n          post: this.post,\n          text: this.text\n        }).then(res => {\n          console.log(\"success upload task\");\n        }).catch(e => {\n          console.log(e);\n        });\n        this.$router.push({\n          // path: \"/writing_assitant_show\",\n          query: {\n            currentTask: this.currentTask,\n            Pid: this.Pid,\n            condition: this.condition,\n            post: this.order[this.currentTask]\n          }\n        });\n      }\n      this.$router.push({\n        path: \"/edit_writing\",\n        query: {\n          currentTask: this.currentTask,\n          Pid: this.Pid,\n          condition: this.condition,\n          post: this.order[this.currentTask]\n        }\n      });\n    },\n    addSurveyListener() {\n      window.addEventListener(\"message\", e => {\n        console.log(e);\n        if (e.origin.includes(\"https://nus.syd1.qualtrics.com\") && e.data.includes(\"QualtricsEOS|SV_1RmdtNoQdRouHie\")) {\n          this.nextPageBool = true;\n          console.log(\"survey end\");\n          this.submitWriting();\n        }\n      });\n    },\n    addHashToLocation() {\n      let params = \"?PID=\" + this.Pid + \"&condition=\" + this.condition + \"&post=\" + this.order[this.currentTask];\n      // history.pushState({}, null, this.$route.path + \"#\" + params);\n      this.post = this.order[this.currentTask];\n      console.log(\"post\", this.post);\n      const iframe = this.$refs.Iframe;\n      iframe.src = \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie\" + params;\n    },\n    update_time(taskName) {\n      console.log(\"uploadTime\", taskName);\n      http.post(\"/update_time_row/\", {\n        pid: this.Pid,\n        task: taskName\n      }).then(res => {\n        console.log(\"success upload time\");\n      }).catch(e => {\n        console.log(e);\n      });\n      return;\n    }\n  },\n  updated() {\n    if (this.condition == \"3\") this.gLoading = false;\n  }\n};","map":{"version":3,"names":["http","VueMarkdown","EasyMDE","VueSimpleRangeSlider","Vue","BootstrapVue","IconsPlugin","ElementUI","use","name","components","mounted","fetchData","getWrtingStyleAndOrder","enableOutputEditMode","addSurveyListener","scrollToTop","data","Pid","testData","edit","p_edit","sliderBool","markdownContent","prompts","my_prompts","drawer","my_drawer","direction","PromptRW","Prompt","seekingPost","beforeEdit","inputText","mimicWriting","style","models","selectedItem","editMode","m_style","markdownEditor","markdownOutputEditor","toAttitudinalBool","toExperientialBool","toStyleLearningBool","loading","gLoading","text","currentTab","tabs","nextPageBool","order","currentTask","condition","post","methods","console","log","$route","query","jumpyTo","url","$router","currentRoute","path","push","window","scrollTo","messagePop","type","message","$message","vm","$nextTick","element","$refs","codemirrorScroll","document","getElementsByClassName","maxHeight","overflowY","codemirror","on","value","setOption","gloading","pid","then","res","parseInt","current","order1","order2","info_style","emo_style","addHashToLocation","getWrtingAssistantHelp","uploadTime","catch","e","prompt","model","user","content","refreshDrawer","submitWriting","addEventListener","origin","includes","params","iframe","Iframe","src","update_time","taskName","task","updated"],"sources":["src/components/WritingAssitantShow.vue"],"sourcesContent":["@import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');\n\n\n<template>\n  <div>\n    <header class=\"header-slot\">\n      <slot name=\"header\"><h4>Support message web</h4></slot>\n    </header>\n\n    <div class=\"container\">\n      <div v-show=\"currentTask == 0 && condition != 3\">\n        <p style=\"font-size: 1.2rem\">\n          Great job on completing the training session!\n        </p>\n        <p style=\"font-size: 1.2rem\">\n          Now, let's move on to the main tasks. You'll be shown two\n          support-seeking posts, presented one after the other. For each post,\n          you'll also see an AI-generated response. Your task is to carefully\n          review and evaluate this AI response.\n        </p>\n        <p style=\"font-size: 1.2rem\">\n          At this stage, please <b>refrain from editing the response</b>. You'll\n          have the opportunity to do so in the subsequent step.\n        </p>\n      </div>\n      <div v-show=\"currentTask == 0 && condition == 3\">\n        <p style=\"font-size: 1.2rem\">\n          Great job on completing the training session!\n        </p>\n        <p style=\"font-size: 1.2rem\">\n          Now, let's move on to the main tasks. You'll be shown two\n          support-seeking posts, presented one after the other. For each post,\n          craft a response using the skills you just learned. Once you're happy\n          with your response, go ahead and submit it. After submission, you'll\n          be prompted to assess the message you've written.\n        </p>\n      </div>\n      <b-row v-show=\"currentTask != '2 ' && condition != 3\" align=\"center\">\n        <p style=\"font-size: 2.5rem\">Example of your support message:</p>\n      </b-row>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"12\">\n          <div v-loading=\"loading\" element-loading-text=\"loading...\">\n            <!--Task1-->\n            <div\n              v-show=\"order[currentTask] == '1'\"\n              class=\"grid-content-post2 bg-light\"\n            >\n              <!-- <div class=\"grid-content-post2 bg-light\"> -->\n              <div\n                class=\"fr-view u-clearfix u-hover-feature u-rich-text u-text u-text-1\"\n                data-animation-name=\"\"\n                data-animation-duration=\"0\"\n                data-animation-direction=\"\"\n              >\n                <h5 style=\"text-align: left\">\n                  <span style=\"font-size: 1.8rem\">\n                    Subject: My fiance M/30 said something shocking to me 27/F\n\n                    <br />\n                  </span>\n                </h5>\n\n                <hr />\n\n                <p><br /></p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  My fiance M/30 and I 27/F have been together for a year and so\n                  we took an anniversary vacation. While we were traveling back,\n                  I told him that I wanted to dye my hair, and he said \"You\n                  really think your hair is the issue?\" When I asked what he\n                  meant, he said \"Look at the way your shirt is stretched over\n                  your gut\" When I reminded him I've lost 20 pounds and he's\n                  always complimented my body, he said \"That was laying down.\n                  Standing up I see your shirt stretched over your gut and it\n                  looks so disgusting to me\" I started crying from shock and he\n                  said \"I'm not dealing with you crying over every little thing,\n                  this is pathetic, I'm telling you the truth so you don't get\n                  fat.\" (I work out 5x a week, cook us healthy meals, and avoid\n                  sweets.) We are set to move and get married in 2 months. I\n                  love him and the life we've built but I am devastated by his\n                  comments. I need advice on what to do next, and if he's right\n                  and I'm being too sensitive. TIA!\n                </p>\n                <p><br /><br /><br /></p>\n              </div>\n              <!-- </div> -->\n            </div>\n\n            <!--Task2-->\n            <!-- <div\n              \n              class=\"grid-content-post bg-light\"\n            > -->\n            <div\n              v-show=\"order[currentTask] == '2'\"\n              class=\"grid-content-post2 bg-light\"\n            >\n              <div\n                class=\"fr-view u-clearfix u-hover-feature u-rich-text u-text u-text-1\"\n                data-animation-name=\"\"\n                data-animation-duration=\"0\"\n                data-animation-direction=\"\"\n              >\n                <h5 style=\"text-align: left\">\n                  <span style=\"font-size: 1.8rem\">\n                    Subject: Just found out I'm being let go from my job today.\n                    What the fuck do i do?\n\n                    <br />\n                  </span>\n                </h5>\n\n                <hr />\n\n                <p><br /></p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  GBeen with the place for 3 years and for the first 2ish years,\n                  i thought I found my forever place. We had a meeting today and\n                  at the end of it, they mention that despite a lot of other\n                  measures, they're going to have to make a small number of\n                  staff cuts, and it turns out that after asking my boss, I was\n                  one of the people they were letting go. It's really\n                  frustrating. I was great at my job. The first year I had a 10%\n                  raise and the second year I dealt with a lot of the extra work\n                  that I did to finance and beyond my job description. But they\n                  gave me a standard raise because of financials and now I'm\n                  being let go. I'm absolutely devastated. I don't even know\n                  where to begin besides updating my resume. I'm so gutted.\n                </p>\n                <p><br /><br /><br /></p>\n              </div>\n            </div>\n            <!-- </div> -->\n          </div>\n        </el-col>\n        <el-col :span=\"12\">\n          <div\n            v-show=\"currentTask != '2'\"\n            class=\"grid-content bg-light\"\n            v-loading=\"gLoading\"\n            element-loading-text=\"AI is generating...\"\n          >\n            <div class=\"label_container\" style=\"display: flex\">\n              <label\n                style=\"\n                  font-family: Roboto, RobotoDraft, Helvetica, Arial, sans-serif;\n                  font-size: large;\n                \"\n              ></label>\n            </div>\n            <textarea\n              id=\"outputArea\"\n              ref=\"markdownEditor\"\n              class=\"textarea\"\n            ></textarea>\n          </div>\n        </el-col>\n      </el-row>\n      <div\n        v-show=\"currentTask != '2'\"\n        v-loading=\"loading\"\n        element-loading-text=\"loading...\"\n        class=\"survey\"\n      >\n        <iframe ref=\"Iframe\" width=\"100%\" height=\"1300px\"></iframe>\n        <b-col align-v=\"center\">\n          <!-- <b-row align-self=\"center\"\n            ><center>\n              <p>Please first submit the survey then go to the next page.</p>\n            </center></b-row\n          > -->\n\n          <b-row align-self=\"center\"\n            ><center>\n              <el-button\n                @click=\"submitWriting\"\n                type=\"primary\"\n                v-show=\"nextPageBool\"\n                style=\"margin: 10px\"\n                >Next page</el-button\n              >\n            </center></b-row\n          >\n        </b-col>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\n\nimport http from \"@/http\";\nimport VueMarkdown from \"vue-markdown\";\nimport EasyMDE from \"easymde\";\nimport \"easymde/dist/easymde.min.css\";\nimport VueSimpleRangeSlider from \"vue-simple-range-slider/vue2\";\nimport \"vue-simple-range-slider/vue2/css\";\nimport Vue from \"vue\";\nimport { BootstrapVue, IconsPlugin } from \"bootstrap-vue\";\n\n// Import Bootstrap and BootstrapVue CSS files (order is important)\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\nimport ElementUI from \"element-ui\";\n\nVue.use(ElementUI);\n// Make BootstrapVue available throughout your project\nVue.use(BootstrapVue);\n\nexport default {\n  name: \"WritingAssitantShow\",\n  components: {\n    VueMarkdown,\n    EasyMDE,\n    VueSimpleRangeSlider,\n  },\n\n  mounted() {\n    this.fetchData();\n    // this.enableEditMode();\n\n    this.getWrtingStyleAndOrder();\n\n    this.enableOutputEditMode();\n    this.addSurveyListener();\n    this.scrollToTop();\n    //  检查是否是登录用户\n  },\n  data() {\n    return {\n      Pid: \"\",\n      testData: \"\",\n      edit: false,\n      p_edit: false,\n      sliderBool: false,\n      markdownContent: \"\",\n      prompts: null,\n      my_prompts: null,\n      drawer: false,\n      my_drawer: false,\n      direction: \"rtl\",\n\n      PromptRW:\n        \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned. \\\n        Write a supportive message in response to the help-seeking post below, using the linguistic style, including functions words and communication styles, that you identified: \",\n      Prompt:\n        \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned.\\\n        Write a supportive message in response to the help-seeking post below.\",\n\n      seekingPost: [\n        \"Subject: Just found out I'm being let go from my job today. What the fuck do i do?:\\n\\\n        Been with the place for 3 years and for the first 2ish years,\\\n        i thought I found my forever place. We had a meeting today and\\\n        at the end of it, they mention that despite a lot of other measures,\\\n        they're going to have to make a small number of staff cuts, and it\\\n        turns out that after asking my boss, I was one of the people they were\\\n        letting go. It's really frustrating. I was great at my job. The first year\\\n        I had a 10% raise and the second year I dealt with a lot of the extra work\\\n        that I did to finance and beyond my job description. But they gave me a standard\\\n        raise because of financials and now I'm being let go. I'm absolutely devastated. \\\n        I don't even know where to begin besides updating my resume. I'm so gutted.\",\n\n        \"Subject: My fiance M/30 said something shocking to me 27/F. \\n\\\n         My fiance M/30 and I 27/F have been together for a year and \\\n         so we took an anniversary vacation. While we were traveling back,\\\n         I told him that I wanted to dye my hair, and he said \\\"You really \\\n         think your hair is the issue?\\\" When I asked what he meant, he said\\\n        \\\"Look at the way your shirt is stretched over your gut\\\" When I \\\n        reminded him I've lost 20 pounds and he's always complimented my \\\n        body, he said \\\"That was laying down. Standing up I see your shirt \\\n        stretched over your gut and it looks so disgusting to me\\\" I started\\\n        crying from shock and he said \\\"I'm not dealing with you crying over\\\n        every little thing, this is pathetic, I'm telling you the truth so\\\n        you don't get fat.\\\" (I work out 5x a week, cook us healthy meals,\\\n        and avoid sweets.) We are set to move and get married in 2 months.\\\n        I love him and the life we've built but I am devastated by his\\\n        comments. I need advice on what to do next, and if he's right and\\\n        I'm being too sensitive. TIA!\",\n      ],\n\n      beforeEdit: \"\",\n      inputText: \"\",\n\n      mimicWriting: \"\",\n      style: \"\",\n      // models:['gpt-3.5-turbo', 'gpt-3.5-turbo-16k', 'gpt-4'],\n      models: [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\"],\n      selectedItem: \"gpt-4\",\n\n      editMode: true,\n      m_style: \"\",\n      markdownEditor: null,\n\n      markdownOutputEditor: null,\n\n      toAttitudinalBool: false,\n      toExperientialBool: false,\n      toStyleLearningBool: true,\n      loading: true,\n      gLoading: true,\n      text: \"\",\n      currentTab: \"Home\",\n      tabs: [\"Home\", \"Posts\", \"Archive\"],\n      nextPageBool: false,\n      order: [],\n      currentTask: 0,\n      condition: -1,\n      post: \"1\",\n    };\n  },\n\n  methods: {\n    fetchData() {\n      console.log(\"ID: \", this.$route.query);\n      this.Pid = this.$route.query.Pid;\n      this.condition = this.$route.query.condition;\n      this.post = this.$route.query.post;\n\n      // \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie?username=\" +\n      // this.Pid;\n    },\n    jumpyTo(url) {\n      if (this.$router.currentRoute.path !== url) {\n        this.$router.push({\n          path: url,\n          query: { Pid: this.Pid, condition: this.condition },\n        });\n      }\n    },\n\n    scrollToTop() {\n      window.scrollTo(1, 2);\n    },\n\n    messagePop(type, message) {\n      this.$message({\n        message: `${message}`,\n        type: `${type}`,\n      });\n    },\n\n    enableOutputEditMode() {\n      const vm = this;\n      this.$nextTick(() => {\n        if (!this.markdownEditor) {\n          this.markdownEditor = new EasyMDE({\n            element: this.$refs.markdownEditor,\n          });\n          //设计样式\n          const codemirrorScroll =\n            document.getElementsByClassName(\"CodeMirror-scroll\")[0];\n          if (codemirrorScroll) {\n            codemirrorScroll.style.maxHeight = \"1000px\";\n            codemirrorScroll.style.overflowY = \"auto\";\n            console.log(\"output successfully set\");\n          }\n\n          if (this.condition == \"3\") {\n            // this.markdownEditor.value(this.text);\n            console.log(\"here\");\n            this.markdownEditor.codemirror.on(\"change\", () => {\n              vm.text = vm.markdownEditor.value();\n              console.log(vm.text); // 输出当前的输入值\n            });\n          } else {\n            this.markdownEditor.codemirror.setOption(\"readOnly\", true);\n          }\n        }\n      });\n    },\n\n    getWrtingStyleAndOrder() {\n      this.gloading = true;\n      // this.messagePop(\n      //   \"success\",\n      //   \"Take a few seconds to generate the support message. Please wait.\"\n      // );\n      http\n        .post(\"/get_google_sheet_linguistic_style/\", {\n          pid: this.Pid,\n          condition: this.condition,\n        })\n        .then((res) => {\n          this.loading = false;\n\n          this.currentTask = parseInt(res.data.current);\n          console.log(\"currentTask:\", this.currentTask);\n\n          this.order = [res.data.order1, res.data.order2];\n          this.condition = res.data.condition;\n          console.log(\"condition:\", this.condition);\n          console.log(\"order:\", this.order);\n          console.log(\"this.condition != '3'\", this.condition != \"3\");\n          if (this.order[this.currentTask] == \"1\") {\n            this.style = res.data.info_style;\n            console.log(\"info style:\", this.style);\n          }\n          if (this.order[this.currentTask] == \"2\") {\n            this.style = res.data.emo_style;\n            console.log(\"emo style:\", this.style);\n          }\n          this.addHashToLocation();\n          if (this.condition != \"3\") {\n            console.log(\"getWrtingAssistantHelp\");\n            this.getWrtingAssistantHelp();\n          }\n          this.post = this.order[this.currentTask];\n          this.uploadTime(\"main_task_start_\" + this.post);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n\n    getWrtingAssistantHelp() {\n      console.log(\"order:\", parseInt(this.order));\n      console.log(\"currentTask:\", parseInt(this.currentTask));\n      console.log(\"currentPost:\", this.order[parseInt(this.currentTask)]);\n      prompt = \"\";\n      if (this.condition == \"1\") {\n        prompt = `${this.PromptRW}\\n\n                     ${this.style}\\n\n                     [help-seeking post]\\n\n                     ${\n                       this.seekingPost[\n                         this.order[parseInt(this.currentTask)] - 1\n                       ]\n                     }\\n `;\n      }\n      if (this.condition == \"2\") {\n        prompt = `${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${\n                       this.seekingPost[\n                         this.order[parseInt(this.currentTask)] - 1\n                       ]\n                     }\\n `;\n      }\n\n      console.log(\"提交的数据是：\", prompt);\n      http\n        .post(\"/writing_assistant/\", {\n          prompt: prompt,\n          model: this.selectedItem,\n          user: this.Pid,\n          post: this.post,\n        })\n        .then((res) => {\n          this.markdownEditor.value(res.data.content);\n          this.mimicWriting = res.data.content;\n          this.gLoading = false;\n          console.log(\"output Text:\", res.data);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n\n    refreshDrawer() {\n      this.drawer = true;\n    },\n\n    submitWriting() {\n      this.uploadTime(\"main_task_end_\" + this.post);\n      http\n        .post(\"/update_current_task/\", {\n          pid: this.Pid,\n        })\n        .then((res) => {\n          this.currentTask = res.data.current;\n          console.log(\"order:\", res);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n\n      if (this.condition == \"3\") {\n        http\n          .post(\"/update_support_message/\", {\n            pid: this.Pid,\n            post: this.post,\n            text: this.text,\n          })\n          .then((res) => {\n            console.log(\"success upload task\");\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n        this.$router.push({\n          // path: \"/writing_assitant_show\",\n          query: {\n            currentTask: this.currentTask,\n            Pid: this.Pid,\n            condition: this.condition,\n            post: this.order[this.currentTask],\n          },\n        });\n      }\n      this.$router.push({\n        path: \"/edit_writing\",\n        query: {\n          currentTask: this.currentTask,\n          Pid: this.Pid,\n          condition: this.condition,\n          post: this.order[this.currentTask],\n        },\n      });\n    },\n\n    addSurveyListener() {\n      window.addEventListener(\"message\", (e) => {\n        console.log(e);\n        if (\n          e.origin.includes(\"https://nus.syd1.qualtrics.com\") &&\n          e.data.includes(\"QualtricsEOS|SV_1RmdtNoQdRouHie\")\n        ) {\n          this.nextPageBool = true;\n          console.log(\"survey end\");\n          this.submitWriting();\n        }\n      });\n    },\n    addHashToLocation() {\n      let params =\n        \"?PID=\" +\n        this.Pid +\n        \"&condition=\" +\n        this.condition +\n        \"&post=\" +\n        this.order[this.currentTask];\n      // history.pushState({}, null, this.$route.path + \"#\" + params);\n      this.post = this.order[this.currentTask];\n      console.log(\"post\", this.post);\n      const iframe = this.$refs.Iframe;\n      iframe.src =\n        \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie\" + params;\n    },\n    update_time(taskName) {\n      console.log(\"uploadTime\", taskName);\n      http\n        .post(\"/update_time_row/\", {\n          pid: this.Pid,\n          task: taskName,\n        })\n        .then((res) => {\n          console.log(\"success upload time\");\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n      return;\n    },\n  },\n  updated() {\n    if (this.condition == \"3\") this.gLoading = false;\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  background: white;\n  width: 75%;\n  height: auto;\n  margin: auto;\n}\n.header {\n  margin-left: 4em;\n  /*margin-top: 4em;*/\n  padding-top: 4em;\n  display: flex;\n}\n\n.button {\n  /*width: 100px;*/\n  width: 10%;\n}\n\n.drop-item {\n  /*width: 500px;*/\n  font-family: ColfaxAI, helvetica, sans-serif;\n  font-size: small;\n  /*white-space: normal;*/\n  /*word-wrap: break-word;*/\n}\n\n.translate-container {\n  padding: 20px;\n}\n\n.grid-content {\n  height: 650px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n.grid-content-2 {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.grid-content-post {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.grid-content-post2 {\n  height: 650px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.slider-content {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n  padding-right: 4em;\n}\n\n.bg-light {\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.textarea {\n  padding-top: 1em;\n  padding-left: 1em;\n  padding-right: 1em;\n  padding-bottom: 1em;\n  height: 550px;\n\n  /*font-family: 'Arial', sans-serif; !* 这将更改字体 *!*/\n  font-family: \"Roboto\", sans-serif;\n  font-size: 16px; /* 这将更改字体大小 */\n  color: #333; /* 这将更改文本颜色 */\n  line-height: 1.5; /* 这将更改行高 */\n  letter-spacing: 0.05em; /* 这将更改字符间距 */\n  text-align: justify; /* 这将使文本两端对齐 */\n  overflow-y: scroll;\n}\n\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n\n.el-menu-item i {\n  float: right;\n  margin-top: 5px;\n  cursor: pointer;\n}\n\n.example {\n  background: #ffffff;\n  margin: 20px;\n  border-color: #e7e7e7;\n  padding: 40px;\n}\n\n.header-slot {\n  background: #d4e6ff;\n  padding: 20px 100px;\n  position: sticky;\n  top: 0;\n  /* z-index: 10000; */\n}\n</style>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}