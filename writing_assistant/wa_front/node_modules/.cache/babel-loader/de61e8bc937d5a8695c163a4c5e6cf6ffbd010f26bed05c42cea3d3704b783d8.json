{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5faf54d0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  slot: \"header\",\n  class: \"clearfix\"\n}, [/*#__PURE__*/_createCommentVNode(\"        <span>Login</span>\"), /*#__PURE__*/_createElementVNode(\"img\", {\n  src: \"/imgs/ai4sg_logo.png\",\n  alt: \"Logo\",\n  class: \"logo\"\n})], -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"button\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Login\");\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"box-card\"\n  }, {\n    default: _withCtx(() => [_hoisted_2, _createVNode(_component_el_form, {\n      model: $data.form,\n      \"label-width\": \"120px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"Prolific ID\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.username,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" <el-form-item label=\\\"Password\\\">\\n          <el-input type=\\\"password\\\" v-model=\\\"form.password\\\"></el-input>\\n        </el-form-item> \"), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.signUp\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]), _createCommentVNode(\" <el-button type=\\\"primary\\\" @click=\\\"signUp\\\">Sign Up</el-button> \")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementVNode","slot","_createCommentVNode","src","alt","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","_hoisted_2","_component_el_form","model","$data","form","_component_el_form_item","label","_component_el_input","username","$event","_hoisted_3","_component_el_button","type","onClick","$options","signUp"],"sources":["/Users/lee/Downloads/writing_assistant/wa_front/src/components/LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n<!--        <span>Login</span>-->\n        <img src=\"/imgs/ai4sg_logo.png\" alt=\"Logo\" class=\"logo\">\n      </div>\n      <el-form :model=\"form\" label-width=\"120px\">\n        <el-form-item label=\"Prolific ID\">\n          <el-input v-model=\"form.username\"></el-input>\n        </el-form-item>\n        <!-- <el-form-item label=\"Password\">\n          <el-input type=\"password\" v-model=\"form.password\"></el-input>\n        </el-form-item> -->\n        <div class=\"button\">\n          <el-button type=\"primary\" @click=\"signUp\">Login</el-button>\n        </div>\n        <!-- <el-button type=\"primary\" @click=\"signUp\">Sign Up</el-button> -->\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport http from \"@/http\";\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      form: {\n        username: '',\n        // password: '',\n      }\n    };\n  },\n  methods: {\n    messagePop(type, message){\n      this.$message({\n        message: `${message}`,\n        type: `${type}`\n      });\n    },\n    jumpyTo(url){\n      if(this.$router.currentRoute.path !== url){\n        this.$router.push(url)\n      }\n    },\n    fetchID() {\n      // Get the value of the 'PROLIFIC_PID' parameter from the current URL\n      const urlParams = new URLSearchParams(window.location.search);\n      const prolificPID = urlParams.get('PROLIFIC_PID');\n\n      // Update the 'username' variable with the value of 'PROLIFIC_PID'\n      if (prolificPID) {\n        this.form.username = prolificPID;\n      }\n    },\n    // login() {\n    //   // Handle login logic here\n    //   // console.log(this.form);\n    //   http.post('/login/',{\n    //     name: this.form.username,\n    //     pwd: this.form.password,\n    //   }).then(res => {\n    //     console.log('successfully login')\n    //     console.log(res)\n    //     sessionStorage.setItem('username', this.form.username)\n    //     this.messagePop('success', \"successfully login!!\")\n    //     this.jumpyTo(\"/writing_assistant\")\n    //   //  同时也可以在后端为 single_fileupload 创建一个文件夹\n    //   //  后面还可以再后端为 multiple_fileupload 创建一个文件夹\n\n    //   }).catch(e=>{\n    //     console.log(\"login\", e)\n    //     this.messagePop('error', \"login error, wrong username or password\")\n    //   })\n    // },\n\n\n    signUp(){\n      console.log(this.form)\n      console.log(this.form.username)\n      http.post('/signup/',{\n        name: this.form.username,\n        // pwd: this.form.password,\n      }).then(res => {\n        console.log('successfully sign up')\n        console.log(res)\n        if(res.data.success){\n          this.messagePop('success', 'successfully sign up',)\n          sessionStorage.setItem('username', this.form.username)\n          this.messagePop('success', \"successfully login!!\")\n          this.jumpyTo(\"/writing_assistant\")\n        }else {\n          this.messagePop('error', \"please try another username\")\n        }\n      }).catch(e=>{\n        console.log(\"sign up error\", e)\n        this.messagePop('error', \"please try another username\")\n      })\n    }\n  },\n  beforeMount() {\n   this.fetchID()\n},\n}\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n.box-card {\n  width: 30%;\n}\n\n.logo {\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  width: 20%;\n}\n\n.button{\n  display: block;\n  margin-left: auto;\n  /* margin-right: auto; */\n  width: 20%;\n}\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;gEAElBC,mBAAA,CAGM;EAHDC,IAAI,EAAC,QAAQ;EAACF,KAAK,EAAC;iBAC/BG,mBAAA,8BAAiC,E,aACzBF,mBAAA,CAAwD;EAAnDG,GAAG,EAAC,sBAAsB;EAACC,GAAG,EAAC,MAAM;EAACL,KAAK,EAAC;;;EAS5CA,KAAK,EAAC;AAAQ;iDACyB,OAAK;;;;;;;uBAdvDM,mBAAA,CAmBM,OAnBNC,UAmBM,GAlBJC,YAAA,CAiBUC,kBAAA;IAjBDT,KAAK,EAAC;EAAU;sBACvB,MAGM,CAHNU,UAGM,EACNF,YAAA,CAWUG,kBAAA;MAXAC,KAAK,EAAEC,KAAA,CAAAC,IAAI;MAAE,aAAW,EAAC;;wBACjC,MAEe,CAFfN,YAAA,CAEeO,uBAAA;QAFDC,KAAK,EAAC;MAAa;0BAC/B,MAA6C,CAA7CR,YAAA,CAA6CS,mBAAA;sBAA1BJ,KAAA,CAAAC,IAAI,CAACI,QAAQ;qEAAbL,KAAA,CAAAC,IAAI,CAACI,QAAQ,GAAAC,MAAA;;;UAElChB,mBAAA,6IAEmB,EACnBF,mBAAA,CAEM,OAFNmB,UAEM,GADJZ,YAAA,CAA2Da,oBAAA;QAAhDC,IAAI,EAAC,SAAS;QAAEC,OAAK,EAAEC,QAAA,CAAAC;;0BAAQ,MAAK,C;;wCAEjDtB,mBAAA,uEAAsE,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}