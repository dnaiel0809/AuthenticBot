{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\n\nimport http from \"@/http\";\nimport VueMarkdown from \"vue-markdown\";\nimport EasyMDE from \"easymde\";\nimport \"easymde/dist/easymde.min.css\";\nimport VueSimpleRangeSlider from \"vue-simple-range-slider/vue2\";\nimport \"vue-simple-range-slider/vue2/css\";\nimport Vue from \"vue\";\nimport { BootstrapVue, IconsPlugin } from \"bootstrap-vue\";\n\n// Import Bootstrap and BootstrapVue CSS files (order is important)\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\n\n// Make BootstrapVue available throughout your project\nVue.use(BootstrapVue);\nexport default {\n  name: \"WritingAssitantShow\",\n  components: {\n    VueMarkdown,\n    EasyMDE,\n    VueSimpleRangeSlider\n  },\n  mounted() {\n    this.fetchData();\n    // this.enableEditMode();\n\n    this.getWrtingStyleAndOrder();\n    this.enableOutputEditMode();\n    this.addSurveyListener();\n    this.scrollToTop();\n    //  检查是否是登录用户\n  },\n\n  data() {\n    return {\n      Pid: \"\",\n      testData: \"\",\n      edit: false,\n      p_edit: false,\n      sliderBool: false,\n      markdownContent: \"\",\n      prompts: null,\n      my_prompts: null,\n      drawer: false,\n      my_drawer: false,\n      direction: \"rtl\",\n      PromptRW: \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned. \\\n        Write a supportive message in response to the help-seeking post below, using the linguistic style, including functions words and communication styles, that you identified: \",\n      Prompt: \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned.\\\n        Write a supportive message in response to the help-seeking post below.\",\n      seekingPost: [\"High-functioning depression: I feel like I'm living a double life.\\n\\\n            I read a lot of posts on here of people struggling with daily,\\\n            debilitating depression that plagues every aspect of their lives,\\\n            making it difficult to do small things like even take a shower. I\\\n            feel that I am on the opposite side of the spectrum and wanted to\\\n            share that it is equally as horrible. From an outsider's\\\n            perspective, I appear to be a very happy and stable individual. I\\\n            have a financially secure job and I go to work every day and not\\\n            only try my best but actively try to get along with others and make\\\n            people laugh every day. My coworkers like me, and some look up to\\\n            me. No one would think I have any problems at all. However, I feel\\\n            like I am hidden behind a veil, and when I come home from work and\\\n            when I am in the privacy of my home, I am in such crippling\\\n            depression. I have such terrible episodes of sadness. I hate myself.\\\n            I over-analyze everything stupid I do or say throughout the day and\\\n            I replay it in my mind constantly and belittle myself. I don't feel\\\n            proud of myself for any of my accomplishments and genuinely don't\\\n            know why anyone even likes me. And yet I still get up every day,\\\n            live this routine, and put on a facade like I am okay. It feels like\\\n            I am living a double life that I cannot escape.\", \"I can’t get motivated to do anything. \\n\\\n            I know there is no magic pill that will help me. I’m sitting\\\n            watching tv all day and online trying to take my mind off negative\\\n            thoughts. I want to be happy. What should I do? I feel like I’m\\\n            losing my mind.\"],\n      beforeEdit: \"\",\n      inputText: \"\",\n      mimicWriting: \"\",\n      style: \"\",\n      // models:['gpt-3.5-turbo', 'gpt-3.5-turbo-16k', 'gpt-4'],\n      models: [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\"],\n      selectedItem: \"gpt-4\",\n      editMode: true,\n      m_style: \"\",\n      markdownEditor: null,\n      markdownOutputEditor: null,\n      toAttitudinalBool: false,\n      toExperientialBool: false,\n      toStyleLearningBool: true,\n      loading: true,\n      gLoading: true,\n      text: \"\",\n      currentTab: \"Home\",\n      tabs: [\"Home\", \"Posts\", \"Archive\"],\n      nextPageBool: false,\n      order: [],\n      currentTask: 0,\n      condition: -1\n    };\n  },\n  methods: {\n    fetchData() {\n      console.log(\"ID: \", this.$route.query);\n      this.Pid = this.$route.query.Pid;\n      this.condition = this.$route.query.condition;\n\n      // \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie?username=\" +\n      // this.Pid;\n    },\n\n    jumpyTo(url) {\n      if (this.$router.currentRoute.path !== url) {\n        this.$router.push({\n          path: url,\n          query: {\n            Pid: this.Pid,\n            condition: this.condition\n          }\n        });\n      }\n    },\n    scrollToTop() {\n      window.scrollTo(1, 2);\n    },\n    messagePop(type, message) {\n      this.$message({\n        message: `${message}`,\n        type: `${type}`\n      });\n    },\n    enableOutputEditMode() {\n      const vm = this;\n      this.$nextTick(() => {\n        if (!this.markdownEditor) {\n          this.markdownEditor = new EasyMDE({\n            element: this.$refs.markdownEditor\n          });\n          //设计样式\n          const codemirrorScroll = document.getElementsByClassName(\"CodeMirror-scroll\")[0];\n          if (codemirrorScroll) {\n            codemirrorScroll.style.maxHeight = \"1000px\";\n            codemirrorScroll.style.overflowY = \"auto\";\n            console.log(\"output successfully set\");\n          }\n          if (this.condition == \"3\") {\n            // this.markdownEditor.value(this.text);\n            console.log(\"here\");\n            this.markdownEditor.codemirror.on(\"change\", () => {\n              vm.text = vm.markdownEditor.value();\n              console.log(vm.text); // 输出当前的输入值\n            });\n          } else {\n            this.markdownEditor.codemirror.setOption(\"readOnly\", true);\n          }\n        }\n      });\n    },\n    getWrtingStyleAndOrder() {\n      this.gloading = true;\n      this.messagePop(\"success\", \"Take a few seconds to generate the support message. Please wait.\");\n      http.post(\"/get_google_sheet_linguistic_style/\", {\n        pid: this.Pid,\n        condition: this.condition\n      }).then(res => {\n        this.loading = false;\n        this.currentTask = parseInt(res.data.current);\n        console.log(\"currentTask:\", this.currentTask);\n        if (this.currentTask == \"0\") {\n          this.style = res.data.info_style;\n          console.log(\"info style:\", this.style);\n        }\n        if (this.currentTask == \"1\") {\n          this.style = res.data.emo_style;\n          console.log(\"emo style:\", this.style);\n        }\n        this.order = [res.data.order1, res.data.order2];\n        this.condition = res.data.condition;\n        console.log(\"condition:\", this.condition);\n        console.log(\"order:\", this.order);\n        console.log(\"this.condition != '3'\", this.condition != \"3\");\n        this.addHashToLocation();\n        if (this.condition != \"3\") {\n          console.log(\"getWrtingAssistantHelp\");\n          this.getWrtingAssistantHelp();\n        }\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    getWrtingAssistantHelp() {\n      console.log(\"order:\", parseInt(this.order));\n      console.log(\"currentTask:\", parseInt(this.currentTask));\n      console.log(\"currentPost:\", this.order[parseInt(this.currentTask)]);\n      prompt = \"\";\n      if (this.condition == \"1\") {\n        prompt = `${this.PromptRW}\\n\n                     ${this.style}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[this.order[parseInt(this.currentTask)] - 1]}\\n `;\n      }\n      if (this.condition == \"2\") {\n        prompt = `${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${this.seekingPost[this.order[parseInt(this.currentTask)] - 1]}\\n `;\n      }\n      console.log(\"提交的数据是：\", prompt);\n      http.post(\"/writing_assistant/\", {\n        prompt: prompt,\n        model: this.selectedItem,\n        user: this.Pid,\n        currentTask: this.currentTask\n      }).then(res => {\n        this.markdownEditor.value(res.data.content);\n        this.mimicWriting = res.data.content;\n        this.gLoading = false;\n        console.log(\"output Text:\", res.data);\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    refreshDrawer() {\n      this.drawer = true;\n    },\n    submitWriting() {\n      http.post(\"/update_current_task/\", {\n        pid: this.Pid\n      }).then(res => {\n        this.currentTask = res.data.current;\n        console.log(\"order:\", res);\n      }).catch(e => {\n        console.log(e);\n      });\n      if (this.condition == \"3\") {\n        http.post(\"/update_support_message/\", {\n          pid: this.Pid,\n          task: this.order[this.currentTask],\n          text: this.text\n        }).then(res => {\n          console.log(\"success upload task\");\n        }).catch(e => {\n          console.log(e);\n        });\n        this.$router.push({\n          // path: \"/writing_assitant_show\",\n          query: {\n            currentTask: this.currentTask,\n            Pid: this.Pid,\n            condition: this.condition,\n            post: this.order[this.currentTask]\n          }\n        });\n      }\n      this.$router.push({\n        path: \"/edit_writing\",\n        query: {\n          currentTask: this.currentTask,\n          Pid: this.Pid,\n          condition: this.condition,\n          post: this.order[this.currentTask]\n        }\n      });\n    },\n    addSurveyListener() {\n      window.addEventListener(\"message\", e => {\n        console.log(e);\n        if (e.origin.includes(\"https://nus.syd1.qualtrics.com\") && e.data.includes(\"QualtricsEOS|SV_1RmdtNoQdRouHie\")) {\n          this.nextPageBool = true;\n          console.log(\"survey end\");\n          this.submitWriting();\n        }\n      });\n    },\n    addHashToLocation() {\n      let params = \"?PID=\" + this.Pid + \"&condition=\" + this.condition + \"&post=\" + this.order[this.currentTask];\n      // history.pushState({}, null, this.$route.path + \"#\" + params);\n      const iframe = this.$refs.Iframe;\n      iframe.src = \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie\" + params;\n    }\n  },\n  updated() {\n    if (this.condition == \"3\") this.gLoading = false;\n  }\n};","map":{"version":3,"names":["http","VueMarkdown","EasyMDE","VueSimpleRangeSlider","Vue","BootstrapVue","IconsPlugin","use","name","components","mounted","fetchData","getWrtingStyleAndOrder","enableOutputEditMode","addSurveyListener","scrollToTop","data","Pid","testData","edit","p_edit","sliderBool","markdownContent","prompts","my_prompts","drawer","my_drawer","direction","PromptRW","Prompt","seekingPost","beforeEdit","inputText","mimicWriting","style","models","selectedItem","editMode","m_style","markdownEditor","markdownOutputEditor","toAttitudinalBool","toExperientialBool","toStyleLearningBool","loading","gLoading","text","currentTab","tabs","nextPageBool","order","currentTask","condition","methods","console","log","$route","query","jumpyTo","url","$router","currentRoute","path","push","window","scrollTo","messagePop","type","message","$message","vm","$nextTick","element","$refs","codemirrorScroll","document","getElementsByClassName","maxHeight","overflowY","codemirror","on","value","setOption","gloading","post","pid","then","res","parseInt","current","info_style","emo_style","order1","order2","addHashToLocation","getWrtingAssistantHelp","catch","e","prompt","model","user","content","refreshDrawer","submitWriting","task","addEventListener","origin","includes","params","iframe","Iframe","src","updated"],"sources":["src/components/WritingAssitantShow.vue"],"sourcesContent":["@import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');\n\n\n<template>\n  <div>\n    <header class=\"header-slot\">\n      <slot name=\"header\"><h4>Support message web</h4></slot>\n    </header>\n\n    <div class=\"container\">\n      <div v-show=\"currentTask == 0 && condition != 3\">\n        <p style=\"font-size: 1.2rem\" >Great job on completing the training session!</p>\n        <p style=\"font-size: 1.2rem\">\n          Now, let's move on to the main tasks. You'll be shown two\n          support-seeking posts, presented one after the other. For each post,\n          you'll also see an AI-generated response. Your task is to carefully\n          review and evaluate this AI response.\n        </p>\n        <p style=\"font-size: 1.2rem\">\n          At this stage, please refrain from editing the response. You'll have\n          the opportunity to do so in the subsequent step.\n        </p>\n      </div>\n      <div v-show=\"currentTask == 0 && condition == 3\">\n        <p style=\"font-size: 1.2rem\">Great job on completing the training session!</p>\n        <p style=\"font-size: 1.2rem\">\n          Now, let's move on to the main tasks. You'll be shown two\n          support-seeking posts, presented one after the other. For each post,\n          craft a response using the skills you just learned. Once you're happy\n          with your response, go ahead and submit it. After submission, you'll\n          be prompted to assess the message you've written.\n        </p>\n        <p style=\"font-size: 1.2rem\">\n          At this stage, please refrain from editing the response. You'll have\n          the opportunity to do so in the subsequent step.\n        </p>\n      </div>\n      <b-row v-show=\"currentTask != '2 ' && condition != 3\" align=\"center\">\n        <p style=\"font-size: 2.5rem\">Example of your support message:</p>\n      </b-row>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"12\">\n          <div v-loading=\"loading\">\n            <!--Task1-->\n            <div\n              v-show=\"order[currentTask] == '1'\"\n              class=\"grid-content-post2 bg-light\"\n            >\n              <!-- <div class=\"grid-content-post2 bg-light\"> -->\n              <div\n                class=\"fr-view u-clearfix u-hover-feature u-rich-text u-text u-text-1\"\n                data-animation-name=\"\"\n                data-animation-duration=\"0\"\n                data-animation-direction=\"\"\n              >\n                <h5 style=\"text-align: left\">\n                  <span style=\"font-size: 1.8rem\">\n                    Subject: High-functioning depression: I feel like I'm living\n                    a double life.<br />\n                  </span>\n                </h5>\n\n                <hr />\n\n                <p><br /></p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  I read a lot of posts on here of people struggling with daily,\n                  debilitating depression that plagues every aspect of their\n                  lives, making it difficult to do small things like even take a\n                  shower. I feel that I am on the opposite side of the spectrum\n                  and wanted to share that it is equally as horrible. From an\n                  outsider's perspective, I appear to be a very happy and stable\n                  individual. I have a financially secure job and I go to work\n                  every day and not only try my best but actively try to get\n                  along with others and make people laugh every day. My\n                  coworkers like me, and some look up to me. No one would think\n                  I have any problems at all. However, I feel like I am hidden\n                  behind a veil, and when I come home from work and when I am in\n                  the privacy of my home, I am in such crippling depression. I\n                  have such terrible episodes of sadness. I hate myself. I\n                  over-analyze everything stupid I do or say throughout the day\n                  and I replay it in my mind constantly and belittle myself. I\n                  don't feel proud of myself for any of my accomplishments and\n                  genuinely don't know why anyone even likes me. And yet I still\n                  get up every day, live this routine, and put on a facade like\n                  I am okay. It feels like I am living a double life that I\n                  cannot escape.\n                </p>\n                <p><br /><br /><br /></p>\n              </div>\n              <!-- </div> -->\n            </div>\n\n            <!--Task2-->\n            <!-- <div\n              \n              class=\"grid-content-post bg-light\"\n            > -->\n            <div\n              v-show=\"order[currentTask] == '2'\"\n              class=\"grid-content-post2 bg-light\"\n            >\n              <div\n                class=\"fr-view u-clearfix u-hover-feature u-rich-text u-text u-text-1\"\n                data-animation-name=\"\"\n                data-animation-duration=\"0\"\n                data-animation-direction=\"\"\n              >\n                <h5 style=\"text-align: left\">\n                  <span style=\"font-size: 1.8rem\">\n                    Subject: I can’t get motivated to do anything.<br />\n                  </span>\n                </h5>\n\n                <hr />\n\n                <p><br /></p>\n                <p id=\"isPasted\" style=\"font-size: 1.2rem\">\n                  I know there is no magic pill that will help me. I’m sitting\n                  watching tv all day and online trying to take my mind off\n                  negative thoughts. I want to be happy. What should I do? I\n                  feel like I’m losing my mind.\n                </p>\n                <p><br /><br /><br /></p>\n              </div>\n            </div>\n            <!-- </div> -->\n          </div>\n        </el-col>\n        <el-col :span=\"12\">\n          <div\n            v-show=\"currentTask != '2'\"\n            class=\"grid-content bg-light\"\n            v-loading=\"gLoading\"\n          >\n            <div class=\"label_container\" style=\"display: flex\">\n              <label\n                style=\"\n                  font-family: Roboto, RobotoDraft, Helvetica, Arial, sans-serif;\n                  font-size: large;\n                \"\n              ></label>\n            </div>\n            <textarea\n              id=\"outputArea\"\n              ref=\"markdownEditor\"\n              class=\"textarea\"\n            ></textarea>\n          </div>\n        </el-col>\n      </el-row>\n      <div v-show=\"currentTask != '2'\" v-loading=\"loading\" class=\"survey\">\n        <iframe ref=\"Iframe\" width=\"100%\" height=\"1300px\"></iframe>\n        <b-col align-v=\"center\">\n          <!-- <b-row align-self=\"center\"\n            ><center>\n              <p>Please first submit the survey then go to the next page.</p>\n            </center></b-row\n          > -->\n\n          <b-row align-self=\"center\"\n            ><center>\n              <el-button\n                @click=\"submitWriting\"\n                type=\"primary\"\n                v-show=\"nextPageBool\"\n                style=\"margin: 10px\"\n                >Next page</el-button\n              >\n            </center></b-row\n          >\n        </b-col>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\n\nimport http from \"@/http\";\nimport VueMarkdown from \"vue-markdown\";\nimport EasyMDE from \"easymde\";\nimport \"easymde/dist/easymde.min.css\";\nimport VueSimpleRangeSlider from \"vue-simple-range-slider/vue2\";\nimport \"vue-simple-range-slider/vue2/css\";\nimport Vue from \"vue\";\nimport { BootstrapVue, IconsPlugin } from \"bootstrap-vue\";\n\n// Import Bootstrap and BootstrapVue CSS files (order is important)\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap-vue/dist/bootstrap-vue.css\";\n\n// Make BootstrapVue available throughout your project\nVue.use(BootstrapVue);\n\nexport default {\n  name: \"WritingAssitantShow\",\n  components: {\n    VueMarkdown,\n    EasyMDE,\n    VueSimpleRangeSlider,\n  },\n\n  mounted() {\n    this.fetchData();\n    // this.enableEditMode();\n\n    this.getWrtingStyleAndOrder();\n\n    this.enableOutputEditMode();\n    this.addSurveyListener();\n    this.scrollToTop();\n    //  检查是否是登录用户\n  },\n  data() {\n    return {\n      Pid: \"\",\n      testData: \"\",\n      edit: false,\n      p_edit: false,\n      sliderBool: false,\n      markdownContent: \"\",\n      prompts: null,\n      my_prompts: null,\n      drawer: false,\n      my_drawer: false,\n      direction: \"rtl\",\n\n      PromptRW:\n        \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned. \\\n        Write a supportive message in response to the help-seeking post below, using the linguistic style, including functions words and communication styles, that you identified: \",\n      Prompt:\n        \"Now you will help write supportive, empathic messages. A good supportive message might include: 1. Emotional reactions: Express emotions such as warmth, compassion, and concern. 2. Interpretations: Convey understanding of feelings or experiences. 3. Explorations: Delve deeper into feelings and experiences, even if not directly mentioned.\\\n        Write a supportive message in response to the help-seeking post below.\",\n\n      seekingPost: [\n        \"High-functioning depression: I feel like I'm living a double life.\\n\\\n            I read a lot of posts on here of people struggling with daily,\\\n            debilitating depression that plagues every aspect of their lives,\\\n            making it difficult to do small things like even take a shower. I\\\n            feel that I am on the opposite side of the spectrum and wanted to\\\n            share that it is equally as horrible. From an outsider's\\\n            perspective, I appear to be a very happy and stable individual. I\\\n            have a financially secure job and I go to work every day and not\\\n            only try my best but actively try to get along with others and make\\\n            people laugh every day. My coworkers like me, and some look up to\\\n            me. No one would think I have any problems at all. However, I feel\\\n            like I am hidden behind a veil, and when I come home from work and\\\n            when I am in the privacy of my home, I am in such crippling\\\n            depression. I have such terrible episodes of sadness. I hate myself.\\\n            I over-analyze everything stupid I do or say throughout the day and\\\n            I replay it in my mind constantly and belittle myself. I don't feel\\\n            proud of myself for any of my accomplishments and genuinely don't\\\n            know why anyone even likes me. And yet I still get up every day,\\\n            live this routine, and put on a facade like I am okay. It feels like\\\n            I am living a double life that I cannot escape.\",\n        \"I can’t get motivated to do anything. \\n\\\n            I know there is no magic pill that will help me. I’m sitting\\\n            watching tv all day and online trying to take my mind off negative\\\n            thoughts. I want to be happy. What should I do? I feel like I’m\\\n            losing my mind.\",\n      ],\n\n      beforeEdit: \"\",\n      inputText: \"\",\n\n      mimicWriting: \"\",\n      style: \"\",\n      // models:['gpt-3.5-turbo', 'gpt-3.5-turbo-16k', 'gpt-4'],\n      models: [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\"],\n      selectedItem: \"gpt-4\",\n\n      editMode: true,\n      m_style: \"\",\n      markdownEditor: null,\n\n      markdownOutputEditor: null,\n\n      toAttitudinalBool: false,\n      toExperientialBool: false,\n      toStyleLearningBool: true,\n      loading: true,\n      gLoading: true,\n      text: \"\",\n      currentTab: \"Home\",\n      tabs: [\"Home\", \"Posts\", \"Archive\"],\n      nextPageBool: false,\n      order: [],\n      currentTask: 0,\n      condition: -1,\n    };\n  },\n\n  methods: {\n    fetchData() {\n      console.log(\"ID: \", this.$route.query);\n      this.Pid = this.$route.query.Pid;\n      this.condition = this.$route.query.condition;\n      \n\n      // \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie?username=\" +\n      // this.Pid;\n    },\n    jumpyTo(url) {\n      if (this.$router.currentRoute.path !== url) {\n        this.$router.push({\n          path: url,\n          query: { Pid: this.Pid, condition: this.condition },\n        });\n      }\n    },\n\n    scrollToTop() {\n      window.scrollTo(1, 2);\n    },\n\n    messagePop(type, message) {\n      this.$message({\n        message: `${message}`,\n        type: `${type}`,\n      });\n    },\n\n    enableOutputEditMode() {\n      const vm = this;\n      this.$nextTick(() => {\n        if (!this.markdownEditor) {\n          this.markdownEditor = new EasyMDE({\n            element: this.$refs.markdownEditor,\n          });\n          //设计样式\n          const codemirrorScroll =\n            document.getElementsByClassName(\"CodeMirror-scroll\")[0];\n          if (codemirrorScroll) {\n            codemirrorScroll.style.maxHeight = \"1000px\";\n            codemirrorScroll.style.overflowY = \"auto\";\n            console.log(\"output successfully set\");\n          }\n\n          if (this.condition == \"3\") {\n            // this.markdownEditor.value(this.text);\n            console.log(\"here\");\n            this.markdownEditor.codemirror.on(\"change\", () => {\n              vm.text = vm.markdownEditor.value();\n              console.log(vm.text); // 输出当前的输入值\n            });\n          } else {\n            this.markdownEditor.codemirror.setOption(\"readOnly\", true);\n          }\n        }\n      });\n    },\n\n    getWrtingStyleAndOrder() {\n      this.gloading = true;\n      this.messagePop(\n        \"success\",\n        \"Take a few seconds to generate the support message. Please wait.\"\n      );\n      http\n        .post(\"/get_google_sheet_linguistic_style/\", {\n          pid: this.Pid,\n          condition: this.condition,\n        })\n        .then((res) => {\n          this.loading = false;\n\n          this.currentTask = parseInt(res.data.current);\n          console.log(\"currentTask:\", this.currentTask);\n          if (this.currentTask == \"0\") {\n            this.style = res.data.info_style;\n            console.log(\"info style:\", this.style);\n          }\n          if (this.currentTask == \"1\") {\n            this.style = res.data.emo_style;\n            console.log(\"emo style:\", this.style);\n          }\n          this.order = [res.data.order1, res.data.order2];\n          this.condition = res.data.condition;\n          console.log(\"condition:\", this.condition);\n          console.log(\"order:\", this.order);\n          console.log(\"this.condition != '3'\", this.condition != \"3\");\n          this.addHashToLocation();\n          if (this.condition != \"3\") {\n            console.log(\"getWrtingAssistantHelp\");\n            this.getWrtingAssistantHelp();\n          }\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n\n    getWrtingAssistantHelp() {\n      console.log(\"order:\", parseInt(this.order));\n      console.log(\"currentTask:\", parseInt(this.currentTask));\n      console.log(\"currentPost:\", this.order[parseInt(this.currentTask)]);\n      prompt = \"\";\n      if (this.condition == \"1\") {\n        prompt = `${this.PromptRW}\\n\n                     ${this.style}\\n\n                     [help-seeking post]\\n\n                     ${\n                       this.seekingPost[\n                         this.order[parseInt(this.currentTask)] - 1\n                       ]\n                     }\\n `;\n      }\n      if (this.condition == \"2\") {\n        prompt = `${this.Prompt}\\n\n                     [help-seeking post]\\n\n                     ${\n                       this.seekingPost[\n                         this.order[parseInt(this.currentTask)] - 1\n                       ]\n                     }\\n `;\n      }\n\n      console.log(\"提交的数据是：\", prompt);\n      http\n        .post(\"/writing_assistant/\", {\n          prompt: prompt,\n          model: this.selectedItem,\n          user: this.Pid,\n          currentTask: this.currentTask,\n        })\n        .then((res) => {\n          this.markdownEditor.value(res.data.content);\n          this.mimicWriting = res.data.content;\n          this.gLoading = false;\n          console.log(\"output Text:\", res.data);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n\n    refreshDrawer() {\n      this.drawer = true;\n    },\n\n    submitWriting() {\n      http\n        .post(\"/update_current_task/\", {\n          pid: this.Pid,\n        })\n        .then((res) => {\n          this.currentTask = res.data.current;\n          console.log(\"order:\", res);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n\n      if (this.condition == \"3\") {\n        http\n          .post(\"/update_support_message/\", {\n            pid: this.Pid,\n            task: this.order[this.currentTask],\n            text: this.text,\n          })\n          .then((res) => {\n            console.log(\"success upload task\");\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n        this.$router.push({\n          // path: \"/writing_assitant_show\",\n          query: {\n            currentTask: this.currentTask,\n            Pid: this.Pid,\n            condition: this.condition,\n            post: this.order[this.currentTask],\n          },\n        });\n      }\n      this.$router.push({\n        path: \"/edit_writing\",\n        query: {\n          currentTask: this.currentTask,\n          Pid: this.Pid,\n          condition: this.condition,\n          post: this.order[this.currentTask],\n        },\n      });\n    },\n\n    addSurveyListener() {\n      window.addEventListener(\"message\", (e) => {\n        console.log(e);\n        if (\n          e.origin.includes(\"https://nus.syd1.qualtrics.com\") &&\n          e.data.includes(\"QualtricsEOS|SV_1RmdtNoQdRouHie\")\n        ) {\n          this.nextPageBool = true;\n          console.log(\"survey end\");\n          this.submitWriting()\n        }\n      });\n    },\n    addHashToLocation() {\n      let params =\n        \"?PID=\" +\n        this.Pid +\n        \"&condition=\" +\n        this.condition +\n        \"&post=\" +\n        this.order[this.currentTask];\n      // history.pushState({}, null, this.$route.path + \"#\" + params);\n      const iframe = this.$refs.Iframe;\n      iframe.src = \"https://nus.syd1.qualtrics.com/jfe/form/SV_1RmdtNoQdRouHie\"+params;\n    },\n  },\n  updated() {\n    if (this.condition == \"3\") this.gLoading = false;\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  background: white;\n  width: 75%;\n  height: auto;\n  margin: auto;\n}\n.header {\n  margin-left: 4em;\n  /*margin-top: 4em;*/\n  padding-top: 4em;\n  display: flex;\n}\n\n.button {\n  /*width: 100px;*/\n  width: 10%;\n}\n\n.drop-item {\n  /*width: 500px;*/\n  font-family: ColfaxAI, helvetica, sans-serif;\n  font-size: small;\n  /*white-space: normal;*/\n  /*word-wrap: break-word;*/\n}\n\n.translate-container {\n  padding: 20px;\n}\n\n.grid-content {\n  height: 600px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n.grid-content-2 {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.grid-content-post {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.grid-content-post2 {\n  height: 600px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n}\n\n.slider-content {\n  height: 450px;\n  border-radius: 4px;\n  margin-bottom: 20px;\n  padding-left: 4em;\n  padding-right: 4em;\n}\n\n.bg-light {\n  padding: 20px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.textarea {\n  padding-top: 1em;\n  padding-left: 1em;\n  padding-right: 1em;\n  padding-bottom: 1em;\n  height: 550px;\n\n  /*font-family: 'Arial', sans-serif; !* 这将更改字体 *!*/\n  font-family: \"Roboto\", sans-serif;\n  font-size: 16px; /* 这将更改字体大小 */\n  color: #333; /* 这将更改文本颜色 */\n  line-height: 1.5; /* 这将更改行高 */\n  letter-spacing: 0.05em; /* 这将更改字符间距 */\n  text-align: justify; /* 这将使文本两端对齐 */\n  overflow-y: scroll;\n}\n\n.el-icon-arrow-down {\n  font-size: 12px;\n}\n\n.el-menu-item i {\n  float: right;\n  margin-top: 5px;\n  cursor: pointer;\n}\n\n.example {\n  background: #ffffff;\n  margin: 20px;\n  border-color: #e7e7e7;\n  padding: 40px;\n}\n\n.header-slot {\n  background: #d4e6ff;\n  padding: 20px 100px;\n  position: sticky;\n  top: 0;\n  /* z-index: 10000; */\n}\n</style>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}